<!DOCTYPE html>
<html lang="en"><head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Design by bird. " />
    <meta name="author" content="yejia yang">
    <meta name="author" content="tothemoon">
    <meta name="keywords" content="blog,life,code,desgin,woman in stem, yejia yang">

    <title>PHP | tothemoon&#39;s blog</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <link href='https://fonts.googleapis.com/css?family=Montserrat' rel='stylesheet'>
    <link rel="icon" type="image/png" href="/images/favicon.png" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="icon"  type="image/x-icon"  href="/images/favicon.ico" />
    <link rel="stylesheet" href="/css/tailwind.css?v=3.1" /> 
    <link rel="stylesheet" href="/css/main.css?v=11" /> 
    <link rel="stylesheet" href="/css/404.css" /> 
    <link rel="stylesheet" href="https://cdn.plyr.io/3.7.8/plyr.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0/dist/fancybox/fancybox.css"/>
    <script src="https://kit.fontawesome.com/237a634d14.js" crossorigin="anonymous"></script>
    <script src="https://cdn.plyr.io/3.7.8/plyr.polyfilled.js"></script>

</head><body  >

        <div id="popup"></div>
        <div id="normal" >
            <header  >
    <nav  id="top-nav"   class="trans-parent fixed z-10 w-full py-4 sm:py-6 ">
      <div   id="menu" class="container flex flex-wrap items-center h-full">
        
        <div class="flex gap-4">
  
    <a href="https://www.instagram.com/anqi_tangx/"  target="_blank">
      <i class="fa-brands fa-instagram fa-lg"></i>
    </a>
  
    <a href="https://leetcode.com/BirdyYang/"  target="_blank">
      <i class="fa-solid fa-bug  fa-lg"></i>
    </a>
  
    <a href="https://www.linkedin.com/in/yejia-yang-11105722a/"  target="_blank">
      <i class="fa-brands fa-linkedin fa-lg"></i>
    </a>
  
    <a href="https://github.com/Amber916Young/"  target="_blank">
      <i class="fa-brands fa-github fa-lg"></i>
    </a>
  
</div>
      


        
        <ul class=" hidden sm:flex flex-1 justify-end items-center gap-6 ">












<a href="/"  title="Home">
    <li class="hover  ">
      <i class="fa-solid fa-house"></i>
      Home
    </li>
</a>













<a href="/posts/"  title="My Blog">
    <li class="hover  ">
      <i class="fa-solid fa-paper-plane"></i>
      My Blog
    </li>
</a>













<a href="/gallery/"  title="My Life">
    <li class="hover  ">
      <i class="fa-solid  fa-mountain-sun"></i>
      My Life
    </li>
</a>













<a href="/tags/"  title="Tags">
    <li class="hover    active ">
      <i class="fa-solid fa-tag"></i>
      Tags
    </li>
</a>













<a href="/about/"  title="About">
    <li class="hover  ">
      <i class="fa-solid fa-medal"></i>
      About
    </li>
</a>


</ul>
        
        <div class="flex sm:hidden flex-1 justify-end">
          <button id="toggle" class="button_container">
            <i class="fa-solid fa-bars"></i>           
          </button>
        </div>


        <div class="theme-toggle">
          <input type="checkbox" id="theme-switch" class="theme-switch-input" onclick="toggleTheme()">
          <label for="theme-switch" class="theme-switch-label">
            <span class="theme-switch-icon">
              <i class="fas fa-sun"></i>
              
              
              <i class="fas fa-moon"></i>
            </span>
          </label>
        </div>

      </div>
      <div class="overlay" id="overlay">
        <nav class="overlay-menu">
            <ul>












<a href="/"  title="Home">
    <li class="hover  ">
      <i class="fa-solid fa-house"></i>
      Home
    </li>
</a>













<a href="/posts/"  title="My Blog">
    <li class="hover  ">
      <i class="fa-solid fa-paper-plane"></i>
      My Blog
    </li>
</a>













<a href="/gallery/"  title="My Life">
    <li class="hover  ">
      <i class="fa-solid  fa-mountain-sun"></i>
      My Life
    </li>
</a>













<a href="/tags/"  title="Tags">
    <li class="hover    active ">
      <i class="fa-solid fa-tag"></i>
      Tags
    </li>
</a>













<a href="/about/"  title="About">
    <li class="hover  ">
      <i class="fa-solid fa-medal"></i>
      About
    </li>
</a>


</ul>
        </nav>
      </div>
    
      
      


    </nav>
  </header>
             <main class="min-h-full"  >
<section class="s:mt-10">
  <div class="container sm:my-14">
    <div class="flex flex-col sm:flex-row ">  
      <div class="w-full sm:w-10 sm:mt-10">
        <div class="result" role="group">
          <h2 class="result__title">â€œPHPâ€</h2>
            
            

    



<div class="result__item row-anchor  anime-card " >
    
        <div style="height: 200px; width: 100%; overflow: hidden;">
            <img style="height: 100%; width: 100%; object-fit: cover;" src="https://i.imgur.com/0myESli.png" srcset="https://i.imgur.com/0myESli.png" aria-hidden="true" alt="">
        </div>
    
    <div class="item__content">
            
                
                <p class="item__category category_update">
                Tutorial
             </p>
                
                <p class="item__category category_update">
                Cloud
             </p>
                
                <p class="item__category category_update">
                AWS
             </p>
                
            
    <a  href="https://hupochuanbird.github.io/posts/chinese-search-in-flarum/"  aria-label="Ubuntu 22.04.3: Chinese Search in Flarum and How to fix &#39;PHP Notice: fwrite(): send failed with errno=32 Broken pipe&#39; error in my case">

    <h3 class="item__headline " >
        Ubuntu 22.04.3: Chinese Search in Flarum and How...
          </h3>
    </a>
    

      <a  href="https://hupochuanbird.github.io/posts/chinese-search-in-flarum/"  aria-label="Ubuntu 22.04.3: Chinese Search in Flarum and How to fix &#39;PHP Notice: fwrite(): send failed with errno=32 Broken pipe&#39; error in my case">

        <div class="item__desc">
            In this section, I primarily focus on utilizing the Sonic extension to implement Chinese text search. In my case, the server-side encounters some...

        </div>
        
</a>
<div class="item__date">
    February 11, 2024
  </div>
    </div>
       
  </div>

            
        </div>
      </div>
    </div>
  </div>
  
<nav class="pagination-ctrl" aria-label="myproject">
  <div class="pagination-ctrl__content">
    
    <a role="button" href="#" class="pagination-ctrl__btn pagination-ctrl__btn--previous pagination-ctrl__btn--disabled" aria-disabled="true" aria-label="prev" tabindex="0">
    
    <i class="fa-solid fa-chevron-left fa-2xs"></i>
    </a>
    <div class="pagination-ctrl__info">
      <span class="pagination-ctrl__info__text pagination-ctrl__info--current">1</span>
      <span class="pagination-ctrl__info__text"> page </span>
      <span class="pagination-ctrl__info__text pagination-ctrl__info--total">1</span>
    </div>
    
    <a role="button" href="#" class="pagination-ctrl__btn  pagination-ctrl__btn--next  pagination-ctrl__btn--disabled" aria-label="next" aria-disabled="true">
    
    <i class="fa-solid fa-chevron-right fa-2xs" ></i>
      </a>
  </div>
</nav>

</section>

            </main>
             

<footer class="bg-portfolio-bg-darker-gray">
    <div class="container flex flex-col sm:flex-row justify-between gap-y-10 sm:gap-4 py-14">
    <div class="flex-1">
      
      <h4 class="font-bold mb-4 text-lg">CopyrightÂ© All rights reserved</h4>
      <p class="text-sm mb-2"> 
        <span id="js-year"></span> - tothemoon
      </p>
      <p class="flex gap-4 mt-4">
        Design by bird. 
        
      </p>
      <p class="text-sm mb-4 flex">
        <img src="https://i.imgur.com/k3YTzQE.png" width="100">
        <img src="https://i.imgur.com/zHnVmA2.png" width="100">
        <img src="https://i.imgur.com/PrwitJD.png" width="100">
      </p>

        
    </div>



    
    <div class="flex-1">
      <h4 class="font-bold mb-4 text-lg">Quick links</h4>
      <ul class="list-none text-sm">












<a href="/"  title="Home">
    <li class="hover  ">
      <i class="fa-solid fa-house"></i>
      Home
    </li>
</a>













<a href="/posts/"  title="My Blog">
    <li class="hover  ">
      <i class="fa-solid fa-paper-plane"></i>
      My Blog
    </li>
</a>













<a href="/gallery/"  title="My Life">
    <li class="hover  ">
      <i class="fa-solid  fa-mountain-sun"></i>
      My Life
    </li>
</a>













<a href="/tags/"  title="Tags">
    <li class="hover    active ">
      <i class="fa-solid fa-tag"></i>
      Tags
    </li>
</a>













<a href="/about/"  title="About">
    <li class="hover  ">
      <i class="fa-solid fa-medal"></i>
      About
    </li>
</a>


</ul>
    </div>
    
    <div class="flex-1">        
      <h4 class="font-bold mb-4 text-lg">Contact me</h4>
      <a href="mailto:frygucki@gmail.com?subject=Hello" class="text-sm hover">hupochuan007@gmail.com</a>
      <div class="flex gap-4 mt-4">
  
    <a href="https://www.instagram.com/anqi_tangx/"  target="_blank">
      <i class="fa-brands fa-instagram fa-lg"></i>
    </a>
  
    <a href="https://leetcode.com/BirdyYang/"  target="_blank">
      <i class="fa-solid fa-bug  fa-lg"></i>
    </a>
  
    <a href="https://www.linkedin.com/in/yejia-yang-11105722a/"  target="_blank">
      <i class="fa-brands fa-linkedin fa-lg"></i>
    </a>
  
    <a href="https://github.com/Amber916Young/"  target="_blank">
      <i class="fa-brands fa-github fa-lg"></i>
    </a>
  
</div>

    </div>
  </div>
</footer>
<button class="scrollToTopBtn showBtn">
    <i class="fa-solid fa-plane-up"></i>
</button>

<script src="https://unpkg.com/lunr/lunr.js"></script>
<script src="/js/search.js"></script>

<script>
    window.store = {
        
        "https:\/\/hupochuanbird.github.io\/tags\/bitbucket\/": {
            "title": "Bitbucket",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/tags\/bitbucket\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/posts\/bitbucket-pipeline-docker-image-in-aws-ecr\/": {
            "title": "Bitbucket Pipeline for Docker Image Deployment to AWS ECR",
            "tags": ["Bitbucket",],
            "content": "Diagram The diagram illustrates a Bitbucket pipeline setup for deploying Docker images to AWS Elastic Container Registry (ECR).\nPipeline.yaml - Contains the Bitbucket pipeline configuration script, defining steps for building, testing, and deploying the Docker image. Dockerfile - Specifies the instructions for building the Docker image. Bitbucket - The repository where the source code and pipeline configuration reside. Bitbucket Pipeline - Executes the pipeline steps as defined in Pipeline.yaml. AWS ECR - The target registry where the Docker image is pushed and stored after deployment. Create a Repo in AWS ECR Navigate to AWS ECR Create a repository Memorise the URI(need set permission for this repo) Create a docker image which contains all the env your project needed In my case, the environment I need includes Python 3.10.3, along with the packages boto3 (for AWS), os, json, and yaml.\nTo Retrieve OpenID Connect (OIDC) information in Bitbucket Navigate to Bitbucket [Repository Settings] Click [OpenID Connect], Memorises Identity provider URL and Audience Set up an IAM role and assign permissions to allow pulling and retrieving Docker images Create Identity Provider Navigate to AWS IAM Create Identity Provider, copy paste the Provider URL and Audience. Then [Add provider] Create IMA Role Navigate to AWS IAM Click [Create Role] Assign permissions After finish the creation, Navigate to this role\u0026rsquo;s detail page, Click [Add Permissions] Here is the yaml file looks like, Resource should be ECR URI\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 { \u0026#34;Version\u0026#34;: \u0026#34;2012-10-17\u0026#34;, \u0026#34;Statement\u0026#34;: [ { \u0026#34;Sid\u0026#34;: \u0026#34;GetAuthorizationToken\u0026#34;, \u0026#34;Effect\u0026#34;: \u0026#34;Allow\u0026#34;, \u0026#34;Action\u0026#34;: [ \u0026#34;ecr:GetAuthorizationToken\u0026#34; ], \u0026#34;Resource\u0026#34;: \u0026#34;*\u0026#34; }, { \u0026#34;Sid\u0026#34;: \u0026#34;ReadRepositoryContents\u0026#34;, \u0026#34;Effect\u0026#34;: \u0026#34;Allow\u0026#34;, \u0026#34;Action\u0026#34;: [ \u0026#34;ecr:BatchCheckLayerAvailability\u0026#34;, \u0026#34;ecr:GetDownloadUrlForLayer\u0026#34;, \u0026#34;ecr:GetRepositoryPolicy\u0026#34;, \u0026#34;ecr:DescribeRepositories\u0026#34;, \u0026#34;ecr:ListImages\u0026#34;, \u0026#34;ecr:DescribeImages\u0026#34;, \u0026#34;ecr:BatchGetImage\u0026#34; ], \u0026#34;Resource\u0026#34;: \u0026#34;arn:aws:ecr:us-east-1:URI\u0026#34; } ] } Write a pipeline to upload docker image to AWS ECR Navigate to bitbucket Click [Deployments], setup AWS_ACCESS_KEY_ID and AWS_SECRET_ACCESS_KEY which should download from IAM created before. and what the code of pipeline, very simple\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 options: docker: true pipelines: default: - step: services: - docker caches: - docker name: Build and Push Docker Image to ECR script: # Push the Docker image to Amazon ECR - docker build -t $ECR_IMAGE_NAME:$BITBUCKET_COMMIT -f ./Dockerfile . - pipe: atlassian/aws-ecr-push-image:2.4.2 variables: AWS_ACCESS_KEY_ID: \u0026#34;$AWS_ACCESS_KEY_ID\u0026#34; AWS_SECRET_ACCESS_KEY: \u0026#34;$AWS_SECRET_ACCESS_KEY\u0026#34; AWS_DEFAULT_REGION: \u0026#34;$AWS_REGION\u0026#34; IMAGE_NAME: \u0026#34;$ECR_IMAGE_NAME\u0026#34; Ref https://support.atlassian.com/bitbucket-cloud/docs/use-aws-ecr-images-in-pipelines-with-openid-connect/\n", 
            "url": "https:\/\/hupochuanbird.github.io\/posts\/bitbucket-pipeline-docker-image-in-aws-ecr\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/categories\/": {
            "title": "Categories",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/categories\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/posts\/": {
            "title": "Posts",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/posts\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/categories\/tutorial\/": {
            "title": "tutorial",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/categories\/tutorial\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/tags\/aws\/": {
            "title": "AWS",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/tags\/aws\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/categories\/namecheap\/": {
            "title": "Namecheap",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/categories\/namecheap\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/tags\/ssl\/": {
            "title": "SSL",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/tags\/ssl\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/posts\/ssl-config-in-ec2-namecheap\/": {
            "title": "SSL Configration in Ec2 Namecheap",
            "tags": ["Tutorial","AWS","SSL",],
            "content": " In this section, I will show you how to config the SSL in Namecheap and AWS EC2.\nPreparation Buy a domain name Buy a SSL certificate Generate a key and csr file Config the SSL in Namecheap Config the SSL in AWS EC2 ubuntu Buy a domain name Go to Namecheap and buy a domain name.\nBuy a SSL certificate Go to Dashboard -\u0026gt; SSL Certificates -\u0026gt; Buy SSL Certificates.\nGenerate a key and csr file Go to csrgenerator.com and generate a key and csr file. You can use online tools to generate the key and csr file. or the following command in Mac:\n1 openssl req -new -newkey rsa:2048 -nodes -keyout yoursite.key -out yoursite.csr Config the SSL in Namecheap Go to SSL Certificates page and click \u0026ldquo;Reissue\u0026rdquo; or \u0026ldquo;Issue\u0026rdquo; in the \u0026ldquo;SSL Certificates\u0026rdquo; section. Paste the csr file content into the \u0026ldquo;CSR\u0026rdquo; field. Then click \u0026ldquo;Next\u0026rdquo; button. Wait for a while, you will see the SSL certificate is ready.\nThen, Go to the \u0026ldquo;Domains List\u0026rdquo; \u0026ndash;\u0026gt; \u0026ldquo;Manage\u0026rdquo; \u0026ndash;\u0026gt; \u0026ldquo;Advanced DNS\u0026rdquo; \u0026ndash;\u0026gt; \u0026ldquo;Manage\u0026rdquo; \u0026ndash;\u0026gt; \u0026ldquo;SSL Certificates\u0026rdquo;.\nIn my case, I config www, www.site as the domain name. The most important thing is to add \u0026ldquo;CNAME Record\u0026rdquo; for the domain name. If the domain name abc.xxx.com, the Host ofCNAME Record is should be \u0026ldquo;_0fxxxd.abc\u0026rdquo;, if the domian name you want to config is www.xxx.com, the Host ofCNAME Record is should be \u0026ldquo;_0fxxxd.\u0026rdquo; Don\u0026rsquo;t forgot the \u0026ldquo;.\u0026rdquo;.\nWhere to find the CNAME Record In the \u0026ldquo;SSL Certificate\u0026rdquo; section, you can see this page and this is the place to get CNAME Record.\nOnce you add the CNAME Record, wait for a while, the status of the SSL certificate will be changed from \u0026ldquo;Pending Validation\u0026rdquo; to \u0026ldquo;Verfiy\u0026rdquo; which me you can see [download] button in SSL Certificates page.\nDownload the SSL certificate in SSL Certificates page. Last step is to config the SSL in AWS EC2.\nConfig the SSL in AWS EC2 Log in to EC2. If this is the first time configuring, you\u0026rsquo;ll need to create a folder yourself to store the SSL files.\n1 sudo mkdir /etc/ssl/ Create three files in this folder: certificate.ca-bundle, certificate.crt, and certificate.key(private key). The command is:\n1 2 3 touch certificate.ca-bundle touch certificate.crt touch certificate.key Open the files downloaded from Namecheap using a text editor, copy the corresponding content into the respective files, and save them. You may find that there is no .key file, but in fact, the key file was already generated when you first created the CSR (Certificate Signing Request).\nConfigure under the apache2 folder 1 2 3 cd ls/etc/apache2/sites-available ls cat 000-default.conf In 000-default.conf file: ServerName and ServerAlias should be the domain name you want to config. abc is sub domain name of xxx.com.\nIn my case, I only want to use visit the site by https://abc.xxx.com, so I need to add the following content into the 000-default.conf file.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 \u0026lt;VirtualHost *:443\u0026gt; ServerAdmin admin@example.com DocumentRoot /var/www/html/forum/public ServerName abc.xxx.com ServerAlias abc.xxx.com \u0026lt;Directory /var/www/html/forum/public/\u0026gt; Options FollowSymLinks AllowOverride All Require all granted \u0026lt;/Directory\u0026gt; \u0026lt;IfModule mod_rewrite.c\u0026gt; RewriteEngine On RewriteCond %{HTTP_HOST} !^abc\\.xxx\\.com$ [NC] RewriteRule ^ - [F] \u0026lt;/IfModule\u0026gt; SSLEngine on RewriteCond %{HTTPS} !=on RewriteRule ^/?(.*) https://%{SERVER_NAME}/$1 [R=301,L] SSLCertificateFile /etc/ssl/certificate.crt SSLCertificateKeyFile /etc/ssl/certificate.key SSLCertificateChainFile /etc/ssl/certificate.ca-bundle \u0026lt;/VirtualHost\u0026gt; \u0026ldquo;Open the 000-default.conf file. I have already configured it, and you can see that port 443 is pointing to the SSL files that were just downloaded and uploaded to the server. If you need to make changes\u0026hellip;\u0026rdquo;\nLast step is to restart the apache2 service.\n1 2 sudo a2enmod ssl sudo systemctl restart apache2 Now, you can visit the site by https://abc.xxx.com.\n", 
            "url": "https:\/\/hupochuanbird.github.io\/posts\/ssl-config-in-ec2-namecheap\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/tags\/tutorial\/": {
            "title": "Tutorial",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/tags\/tutorial\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/tags\/flutter\/": {
            "title": "flutter",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/tags\/flutter\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/categories\/flutter\/": {
            "title": "flutter",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/categories\/flutter\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/tags\/iminstant-messaging\/": {
            "title": "IM(Instant messaging)",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/tags\/iminstant-messaging\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/tags\/tencent\/": {
            "title": "tencent",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/tags\/tencent\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/posts\/tencentim-in-flutter\/": {
            "title": "TencentIM(Instant messaging) C2C chat in Flutter",
            "tags": ["flutter","tencent","IM(Instant messaging)",],
            "content": " Recently, I have been fully focused on IM (instant messaging) in Flutter. It\u0026rsquo;s quite a huge functionality. This article will include initialization, conversation management, message management (text, image, voice, video), and loading progress display. In my project, I use my own UI design, which I find more flexible and prettier (in my perspective ğŸ˜‰).\nHere is the message module folder. A little bit ambitious, I have to say. Don\u0026rsquo;t worry, let\u0026rsquo;s dig into this interesting module in Flutter.\nView post on imgur.com A quick bit of background on IM: In the official document, IM stands for instant messaging, which you probably use every single day in products like WhatsApp, Instagram, Slack, WeChat, and so on. Instant Messaging (IM) provides applications with the ability to support single chat, group chat, pop-ups, and other chat modes. It supports text, pictures, voice, short video, and other types of messages for social communication.\nPreparation(Need to register tencent account) Here is the offical document you can refer to https://cloud.tencent.com/document/product/269/75286\nPlatform Version Flutter Above 2.2.0 Android Android Studio 3.5 and above, App requires Android 4.1 and above devices. iOS Xcode 11.0 and above, for real machine debugging please make sure your project has a valid developer signature. IM Initialization The reference link for this section is â¤ï¸ https://cloud.tencent.com/document/product/269/75293\nBefore you can use the features of the IM SDK, you must initialize it. In most scenarios, you will only need to initialize the IM SDK once during the application lifecycle. Here is the link to register account https://www.tencentcloud.com/?lang=en\u0026amp;pg=\nThe following steps are required to initialize the SDK:\nPrepare the SDKAppID. Set the LogLevelEnum. Set the SDK event listener. Call initSDK to initialize the SDK. You must have the correct SDKAppID for initialization. SDKAppID is a unique identifier used by Tencent Cloud IM service to distinguish customer accounts. We recommend that each individual App apply for a new SDKAppID. messages between different SDKAppIDs are naturally segregated and cannot be interchanged.\nView post on imgur.com Setting up SDK event listeners 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 class IMHelper { static V2TIMManager v2TIMManager = V2TIMManager(); static V2TimAdvancedMsgListener messageListener = V2TimAdvancedMsgListener(); static V2TimGroupListener groupListener = V2TimGroupListener(); static V2TimConversationListener conversationListener = V2TimConversationListener(); static V2TimFriendshipListener friendshipListener = V2TimFriendshipListener(); static V2TIMFriendshipManager friendshipManager = V2TIMFriendshipManager(); static V2TIMConversationManager conversationManager = V2TIMConversationManager(); static Future\u0026lt;void\u0026gt; initSDK() async { V2TimSDKListener sdkListener = V2TimSDKListener( onConnectFailed: (int code, String error) { // è¿æ¥å¤±è´¥çš„å›è°ƒå‡½æ•° // code é”™è¯¯ç  // error é”™è¯¯ä¿¡æ¯ print(\u0026#34;code $code error $error\u0026#34;); }, onConnectSuccess: () { // SDK å·²ç»æˆåŠŸè¿æ¥åˆ°è…¾è®¯äº‘æœåŠ¡å™¨ }, onConnecting: () { // SDK æ­£åœ¨è¿æ¥åˆ°è…¾è®¯äº‘æœåŠ¡å™¨ }, onKickedOffline: () { // å½“å‰ç”¨æˆ·è¢«è¸¢ä¸‹çº¿ï¼Œæ­¤æ—¶å¯ä»¥ UI æç¤ºç”¨æˆ·ï¼Œå¹¶å†æ¬¡è°ƒç”¨ V2TIMManager çš„ login() å‡½æ•°é‡æ–°ç™»å½•ã€‚ }, onSelfInfoUpdated: (V2TimUserFullInfo info) { // ç™»å½•ç”¨æˆ·çš„èµ„æ–™å‘ç”Ÿäº†æ›´æ–° // infoç™»å½•ç”¨æˆ·çš„èµ„æ–™ print(\u0026#34;infoç™»å½•ç”¨æˆ·èµ„æ–™\u0026#34;); }, onUserSigExpired: () { // åœ¨çº¿æ—¶ç¥¨æ®è¿‡æœŸï¼šæ­¤æ—¶æ‚¨éœ€è¦ç”Ÿæˆæ–°çš„ userSig å¹¶å†æ¬¡è°ƒç”¨ V2TIMManager çš„ login() å‡½æ•°é‡æ–°ç™»å½•ã€‚ // login(IMConfig.userid); }, onUserStatusChanged: (List\u0026lt;V2TimUserStatus\u0026gt; userStatusList) { //ç”¨æˆ·çŠ¶æ€å˜æ›´é€šçŸ¥ //userStatusList ç”¨æˆ·çŠ¶æ€å˜åŒ–çš„ç”¨æˆ·åˆ—è¡¨ //æ”¶åˆ°é€šçŸ¥çš„æƒ…å†µï¼šè®¢é˜…è¿‡çš„ç”¨æˆ·å‘ç”Ÿäº†çŠ¶æ€å˜æ›´ï¼ˆåŒ…æ‹¬åœ¨çº¿çŠ¶æ€å’Œè‡ªå®šä¹‰çŠ¶æ€ï¼‰ï¼Œä¼šè§¦å‘è¯¥å›è°ƒ //åœ¨ IM æ§åˆ¶å°æ‰“å¼€äº†å¥½å‹çŠ¶æ€é€šçŸ¥å¼€å…³ï¼Œå³ä½¿æœªä¸»åŠ¨è®¢é˜…ï¼Œå½“å¥½å‹çŠ¶æ€å‘ç”Ÿå˜æ›´æ—¶ï¼Œä¹Ÿä¼šè§¦å‘è¯¥å›è°ƒ //åŒä¸€ä¸ªè´¦å·å¤šè®¾å¤‡ç™»å½•ï¼Œå½“å…¶ä¸­ä¸€å°è®¾å¤‡ä¿®æ”¹äº†è‡ªå®šä¹‰çŠ¶æ€ï¼Œæ‰€æœ‰è®¾å¤‡éƒ½ä¼šæ”¶åˆ°è¯¥å›è°ƒ }, ); V2TimValueCallback\u0026lt;bool\u0026gt; initSDKRes = await v2TIMManager.initSDK( sdkAppID: int.parse(IMConfig.sdkappid), loglevel: LogLevelEnum.V2TIM_LOG_ALL, // Log listener: sdkListener, ); if (initSDKRes.code == 0) { //åˆå§‹åŒ–æˆåŠŸ // login(IMConfig.userid); } } ...... } login/ logout The first time you log in to an IM account, you do not need to register the account first. IM automatically completes the registration of the account after a successful login. You can call the login (click to view details) interface to log in.\nTo incorporate the business logic of my project, I\u0026rsquo;ve handled the registration or login when the user logs into my app.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 static Future\u0026lt;void\u0026gt; login(MemberInfoModel? memberInfoModel) async { String key = IMConfig.key; String userId = memberInfoModel!.id.toString(); UserSigGenerateUtils generateTestUserSig = UserSigGenerateUtils(sdkappid: int.parse(IMConfig.sdkappid), key: key); String userSig = generateTestUserSig.genSig(identifier: userId, expire: 99999); V2TimCallback res = await v2TIMManager.login( userID: userId, userSig: userSig, ); if (res.code == 0) { // ç™»å½•æˆåŠŸé€»è¾‘ IMHelper.getLoginUser(memberInfoModel); print(\u0026#34;ç™»å½•æˆåŠŸé€»è¾‘ ${res.desc}\u0026#34;); } else { print(\u0026#34;ç™»å½•å¤±è´¥ ${res.code}\u0026#34;); } } The getLoginUser method is used to set up user information, such as avatar and username.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 static Future\u0026lt;void\u0026gt; getLoginUser(MemberInfoModel memberInfoModel) async { V2TimValueCallback\u0026lt;String\u0026gt; getLoginUserRes = await v2TIMManager.getLoginUser(); if (getLoginUserRes.code == 0) { //è·å–æˆåŠŸ V2TimUserFullInfo defaultUserInfo = V2TimUserFullInfo( nickName: memberInfoModel.userName, allowType: 0, role: 0, faceUrl: memberInfoModel.userPhoto, gender: 2, selfSignature: memberInfoModel.introduction, ); v2TIMManager.setSelfInfo(userFullInfo: defaultUserInfo); } } Conversation Management This is the parameter description of Conversation class https://comm.qq.com/im/doc/flutter/zh/SDKAPI/Class/Message/V2TimConversation.html\nWhen a user creates a single or group chat, the corresponding session is created. In Tencent Cloud IM SDK, the session class is TencentImSDKPlugin.v2TIMManager.getConversationManager(). You can use the APIs in the conversation manager class to realize the functions of conversation list display/update, conversation unread count update, top conversation, conversation draft, conversation do not disturb and so on.\nIn my project, I need to get all the conversations and display them, including the username, user avatar, number of unread messages, whether it is pinned or not, and whether it is in do-not-disturb mode.\nView post on imgur.com Get all Conversations You can get the conversations by using pagination. Because I need to use conversations on other screens, I define this value in the message provider.\nHere is the code in Message provider\n1 2 3 4 5 6 7 8 List\u0026lt;V2TimConversation?\u0026gt;? _allConversations = []; List\u0026lt;V2TimConversation?\u0026gt;? get allConversations =\u0026gt; _allConversations; Future\u0026lt;void\u0026gt; getAllConversations() async { _allConversations = []; _allConversations = await IMHelper.getConversationList(); notifyListeners(); } In the IMHelper class, there is a recursive function to get all conversations at once.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 static Future\u0026lt;V2TimValueCallback\u0026lt;V2TimConversationResult\u0026gt;\u0026gt; getConversations(String nextSeq) async { return await v2TIMManager.getConversationManager().getConversationList( count: 100, // Number of conversations to fetch per request nextSeq: nextSeq // Cursor for pagination ); } static Future\u0026lt;List\u0026lt;V2TimConversation?\u0026gt;\u0026gt; getConversationList( {String nextSeq = \u0026#34;0\u0026#34;, List\u0026lt;V2TimConversation?\u0026gt;? accumulatedList}) async { // Initialize the accumulated list if it\u0026#39;s null accumulatedList ??= []; // Fetch conversations V2TimValueCallback\u0026lt;V2TimConversationResult\u0026gt; getConversationListRes = await getConversations(nextSeq); if (getConversationListRes.code == 0) { // If fetching is successful, accumulate the conversation list accumulatedList.addAll(getConversationListRes.data?.conversationList ?? []); // Check if the fetching is finished bool? isFinished = getConversationListRes.data?.isFinished; String? nextSeq = getConversationListRes.data?.nextSeq; // If not finished, recursively fetch the next set of conversations if (isFinished != true) { return getConversationList(nextSeq: nextSeq ?? \u0026#34;0\u0026#34;, accumulatedList: accumulatedList); } } // Return the accumulated list of conversations return accumulatedList; } Pin Conversation You can add the callback to handle the next logic action after success.\n1 2 3 4 5 6 7 8 9 10 11 static Future\u0026lt;bool\u0026gt; pinConversation(bool isPinned, String conversationID) async { V2TimCallback callback = await conversationManager.pinConversation(conversationID: conversationID, isPinned: isPinned); if (callback.code == 0) { ToastUtils.showSuccessToast(\u0026#34;success\u0026#34;); return true; } else { ToastUtils.showErrorToast(\u0026#34;fail\u0026#34;); return false; } } Delete Conversation 1 2 3 4 5 6 static Future\u0026lt;void\u0026gt; deleteConversation(String conversationID) async { V2TimCallback deleteConversationRes = await conversationManager.deleteConversation(conversationID: conversationID); if (deleteConversationRes.code == 0) { ToastUtils.showSuccessToast(\u0026#34;delete success\u0026#34;); } } Message Management This is the description of Message https://cloud.tencent.com/document/product/269/75674\nIt provides text messages, image messages, voice messages, video messages, emoji messages, and custom messages.\nIn my project requirements, I need to display these messages using different UIs based on the message type. Another tricky aspect is displaying the sending time. If some messages are sent within one minute of each other, only one timestamp should be displayed. This is similar to how WeChat handles message timestamps.\nView post on imgur.com Send a text Message It\u0026rsquo;s very easy.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 static Future\u0026lt;void\u0026gt; sendTextMessage(String message, Function(V2TimMessage) onMessageSent, {String? receiverId, String? groupId}) async { V2TimValueCallback\u0026lt;V2TimMsgCreateInfoResult\u0026gt; createTextMessageRes = await v2TIMManager.getMessageManager().createTextMessage(text: message); if (createTextMessageRes.code == 0) { // æ–‡æœ¬ä¿¡æ¯åˆ›å»ºæˆåŠŸ String? id = createTextMessageRes.data?.id; // å‘é€æ–‡æœ¬æ¶ˆæ¯ // åœ¨sendMessageæ—¶ï¼Œè‹¥åªå¡«å†™receiveråˆ™å‘ä¸ªäººç”¨æˆ·å•èŠæ¶ˆæ¯ // è‹¥åªå¡«å†™groupIDåˆ™å‘ç¾¤ç»„æ¶ˆæ¯ // è‹¥å¡«å†™äº†receiverä¸groupIDåˆ™å‘ç¾¤å†…çš„ä¸ªäººç”¨æˆ·ï¼Œæ¶ˆæ¯åœ¨ç¾¤èŠä¸­æ˜¾ç¤ºï¼Œåªæœ‰æŒ‡å®šreceiverèƒ½çœ‹è§ V2TimValueCallback\u0026lt;V2TimMessage\u0026gt; sendMessageRes = await v2TIMManager.getMessageManager().sendMessage( id: id!, // åˆ›å»ºçš„messageid receiver: receiverId ?? \u0026#34;\u0026#34;, // æ¥æ”¶äººid groupID: groupId ?? \u0026#34;\u0026#34;, // æ¥æ”¶ç¾¤ç»„id priority: MessagePriorityEnum.V2TIM_PRIORITY_DEFAULT, // æ¶ˆæ¯ä¼˜å…ˆçº§ onlineUserOnly: false, // æ˜¯å¦åªæœ‰åœ¨çº¿ç”¨æˆ·æ‰èƒ½æ”¶åˆ°ï¼Œå¦‚æœè®¾ç½®ä¸º true ï¼Œæ¥æ”¶æ–¹å†å²æ¶ˆæ¯æ‹‰å–ä¸åˆ°ï¼Œå¸¸è¢«ç”¨äºå®ç°â€œå¯¹æ–¹æ­£åœ¨è¾“å…¥â€æˆ–ç¾¤ç»„é‡Œçš„éé‡è¦æç¤ºç­‰å¼±æç¤ºåŠŸèƒ½ï¼Œè¯¥å­—æ®µä¸æ”¯æŒ AVChatRoomã€‚ isExcludedFromUnreadCount: false, // å‘é€æ¶ˆæ¯æ˜¯å¦è®¡å…¥ä¼šè¯æœªè¯»æ•° isExcludedFromLastMessage: false, // å‘é€æ¶ˆæ¯æ˜¯å¦è®¡å…¥ä¼šè¯ lastMessage needReadReceipt: false, // æ¶ˆæ¯æ˜¯å¦éœ€è¦å·²è¯»å›æ‰§ï¼ˆåªæœ‰ Group æ¶ˆæ¯æœ‰æ•ˆï¼Œ6.1 åŠä»¥ä¸Šç‰ˆæœ¬æ”¯æŒï¼Œéœ€è¦æ‚¨è´­ä¹°æ——èˆ°ç‰ˆå¥—é¤ï¼‰ offlinePushInfo: OfflinePushInfo(), // ç¦»çº¿æ¨é€æ—¶æºå¸¦çš„æ ‡é¢˜å’Œå†…å®¹ cloudCustomData: \u0026#34;\u0026#34;, // æ¶ˆæ¯äº‘ç«¯æ•°æ®ï¼Œæ¶ˆæ¯é™„å¸¦çš„é¢å¤–çš„æ•°æ®ï¼Œå­˜äº‘ç«¯ï¼Œæ¶ˆæ¯çš„æ¥æ”¶è€…å¯ä»¥è®¿é—®åˆ° localCustomData: \u0026#34;\u0026#34; // æ¶ˆæ¯æœ¬åœ°æ•°æ®ï¼Œæ¶ˆæ¯é™„å¸¦çš„é¢å¤–çš„æ•°æ®ï¼Œå­˜æœ¬åœ°ï¼Œæ¶ˆæ¯çš„æ¥æ”¶è€…ä¸å¯ä»¥è®¿é—®åˆ°ï¼ŒApp å¸è½½åæ•°æ®ä¸¢å¤± ); print(\u0026#34;sendMessageRes.code ${sendMessageRes.code} ${sendMessageRes.desc}\u0026#34;); if (sendMessageRes.code == 0) { onMessageSent(sendMessageRes.data!); } } } Here is the chat_single_screen calling this method\n1 2 3 4 5 6 void sendMessage(String text) async { await IMHelper.sendTextMessage(text, receiverId: userId, (sentMessage) { Provider.of\u0026lt;MessageProvider\u0026gt;(context, listen: false).clearSearchSection(); insertMessage(sentMessage); }); } Send an image Message In this method, picking an image or taking a photo requires another plugin called image_picker.\nPick image/take photo in chat_single_screen.dart 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 Future\u0026lt;void\u0026gt; openAlbum() async { final pickedFile = await FileHelper.pickImageFromGalleryPath(_picker); if (pickedFile != null) { String path = pickedFile.path; if (FileHelper.isImage(path) == true) { await IMHelper.sendImageMessage(path, (sentMessage) { insertMessage(sentMessage); }, receiverId: userId); } } } Future\u0026lt;void\u0026gt; openCamera() async { String? path = await FileHelper.pickImageFromCameraPath(_picker); if (path != null) { await IMHelper.sendImageMessage(path, (sentMessage) { insertMessage(sentMessage); }, receiverId: userId); } } pickImageFromGalleryPath and pickImageFromCameraPath are two methods I encapsulated for taking a photo or opening the album.\nIMhelper.dart\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 static Future\u0026lt;void\u0026gt; sendImageMessage(String imagePath, Function(V2TimMessage) onMessageSent, {String? receiverId, String? groupId}) async { V2TimValueCallback\u0026lt;V2TimMsgCreateInfoResult\u0026gt; createImageMessageRes = await v2TIMManager.getMessageManager().createImageMessage( imagePath: imagePath, ); if (createImageMessageRes.code == 0) { String? id = createImageMessageRes.data?.id; V2TimValueCallback\u0026lt;V2TimMessage\u0026gt; sendMessageRes = await v2TIMManager .getMessageManager() .sendMessage(id: id!, receiver: receiverId ?? \u0026#34;\u0026#34;, groupID: groupId ?? \u0026#34;\u0026#34;); if (sendMessageRes.code == 0) { onMessageSent(sendMessageRes.data!); } } } Send a voice Message This requirement should take a little time to figure out. Plugins needed for the voice recorder: audioplayers, record\nGenerally, press the button to start the voice recording, release the button to save the voice recording, and get the path to send the voice message.\nIn Flutter, the method to monitor gestures I use is Listener (I have more details when implementing this feature. For example, to imitate WeChat voice recording, also need to monitor the cancel gesture.), but the easiest way is to use GestureDetector.\nIt provides two methods that can be used: onLongPress and onLongPressUp.\nMessageProvider.dart 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 final AudioRecorder _audioRecorder = AudioRecorder(); late int _recordDuration = 0; Timer? _timer; //record voice void startTimer() { _timer?.cancel(); _timer = Timer.periodic(const Duration(seconds: 1), (Timer t) { _recordDuration++; }); notifyListeners(); } // record voice sound ===========start============== Future\u0026lt;void\u0026gt; startRecord() async { _timer?.cancel(); _recordDuration = 0; try { if (await _audioRecorder.hasPermission()) { const encoder = AudioEncoder.aacLc; if (!await AudioHelper.isEncoderSupported(encoder, _audioRecorder)) { return; } const config = RecordConfig(encoder: encoder, numChannels: 1); await AudioHelper.recordFile(_audioRecorder, config); _recordDuration = 0; startTimer(); } } catch (e) { print(\u0026#34;error $e\u0026#34;); } } Future\u0026lt;void\u0026gt; cancelRecord() async { ToastUtils.showSuccessToast(\u0026#34;cancel\u0026#34;); await _audioRecorder.stop(); _timer?.cancel(); _recordDuration = 0; notifyListeners(); } Future\u0026lt;void\u0026gt; stopRecord(Function(String path, int duration) sendVoiceMessage) async { final path = await _audioRecorder.stop(); if (_recordDuration \u0026lt; 1) { ToastUtils.showErrorToast(\u0026#34;too short\u0026#34;); _timer?.cancel(); _recordDuration = 0; return; } if (path != null) { sendVoiceMessage(path, _recordDuration); } _timer?.cancel(); _recordDuration = 0; } // record voice sound ============end=============== After stop recording, then send the voice message.\nchat_single_screen.dart 1 2 3 4 5 6 7 8 Future\u0026lt;void\u0026gt; sendVoiceMessage(String path, int duration) async { ToastUtils.showLoading(); await IMHelper.sendVoiceMessage(path, (sentMessage) { insertMessage(sentMessage); ToastUtils.closeLoading(); }, duration, receiverId: userId); } IMhelper.dart 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 static Future\u0026lt;void\u0026gt; sendVoiceMessage(String soundPath, Function(V2TimMessage) onMessageSent, int duration, {String? receiverId, String? groupId}) async { V2TimValueCallback\u0026lt;V2TimMsgCreateInfoResult\u0026gt; createSoundMessageRes = await v2TIMManager.getMessageManager().createSoundMessage(soundPath: soundPath, duration: duration); if (createSoundMessageRes.code == 0) { String? id = createSoundMessageRes.data?.id; V2TimValueCallback\u0026lt;V2TimMessage\u0026gt; sendMessageRes = await v2TIMManager .getMessageManager() .sendMessage(id: id!, receiver: receiverId ?? \u0026#34;\u0026#34;, groupID: groupId ?? \u0026#34;\u0026#34;); if (sendMessageRes.code == 0) { onMessageSent(sendMessageRes.data!); } } } Send a video Message The video picker also requires the image_picker plugin, and you should choose pickMedia (otherwise, you can only pick images). Another plugin needed is mime, which can get all the information about the video, and video_thumbnail to generate a snapshot that can be used as a preview image.\nFor video messages, need to get the file extension, duration, snapshot path, and video file path.\nfile_helper.dart 1 2 3 4 5 6 7 8 9 10 11 12 static Future\u0026lt;XFile?\u0026gt; pickImageFromGalleryPath(ImagePicker picker) async { // final pickedFile = await picker.pickImage(source: ImageSource.gallery); final pickedFile = await picker.pickMedia( maxWidth: 1920, maxHeight: 1080, ); if (pickedFile != null) { return pickedFile; } else { return null; } } chat_single_screen.dart 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 Future\u0026lt;void\u0026gt; openAlbum() async { final pickedFile = await FileHelper.pickImageFromGalleryPath(_picker); if (pickedFile != null) { String path = pickedFile.path; if (FileHelper.isImage(path) == true) { // send image } else { String? thumbnailPath = await FileHelper.generateSnapshot(path); // get preview image double? duration = await FileHelper.getVideoDuration(path); String? mineType = await FileHelper.getVideoMimetype(path); int intDuration = (duration ?? 0).toInt(); if (thumbnailPath != null) { await IMHelper.sendVideoMessage(path, mineType ?? \u0026#34;mov\u0026#34;, intDuration, thumbnailPath, (sentMessage) { insertMessage(sentMessage); }, receiverId: userId); } } } } IMhelper.dart 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 // video message static Future\u0026lt;void\u0026gt; sendVideoMessage( String videoFilePath, String type, int duration, String snapshotPath, Function(V2TimMessage) onMessageSent, {String? receiverId, String? groupId}) async { V2TimValueCallback\u0026lt;V2TimMsgCreateInfoResult\u0026gt; createVideoMessageRes = await v2TIMManager.getMessageManager().createVideoMessage( videoFilePath: videoFilePath, type: type, duration: duration, snapshotPath: snapshotPath, ); if (createVideoMessageRes.code == 0) { String? id = createVideoMessageRes.data?.id; V2TimValueCallback\u0026lt;V2TimMessage\u0026gt; sendMessageRes = await v2TIMManager .getMessageManager() .sendMessage(id: id!, receiver: receiverId ?? \u0026#34;\u0026#34;, groupID: groupId ?? \u0026#34;\u0026#34;); if (sendMessageRes.code == 0) { onMessageSent(sendMessageRes.data!); } } } Monitor the uploading progress In the Message class, there is a MessageListener. Within this class, onSendMessageProgress will monitor the progress of uploading. This is very useful when uploading videos, as you can use the snapshot and progress to display the uploading progress on the chat screen. Many chat apps do this to inform users about the progress of media uploads.\nMaybe my method is not a perfect solution. I created a custom message type and inserted it into the message list. Once the progress is 100, need to delete this custom message.\nchat_single_screen.dart 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 void setupMessageListener() async { await IMHelper.createMessageListener( .... onSendMessageProgress: (V2TimMessage message, int progress) { print(\u0026#34;æ–‡ä»¶ä¸Šä¼ è¿›åº¦å›è°ƒ $progress\u0026#34;); String messageId = message.msgID!; String path = \u0026#34;\u0026#34;; if (message.elemType == MessageElemType.V2TIM_ELEM_TYPE_VIDEO) { path = message.videoElem!.snapshotPath!; } else if (message.elemType == MessageElemType.V2TIM_ELEM_TYPE_SOUND) { } else if (message.elemType == MessageElemType.V2TIM_ELEM_TYPE_IMAGE) { path = message.imageElem!.path!; } if (path == \u0026#34;\u0026#34;) return; if (progress == 100) { // delete removeMessage(messageId); return; } V2TimCustomElem progressMessage = V2TimCustomElem(data: messageId, desc: path, extension: progress.toString()); V2TimMessage newItem = V2TimMessage( msgID: messageId, sender: message.sender, elemType: MessageElemType.V2TIM_ELEM_TYPE_CUSTOM, customElem: progressMessage, timestamp: message.timestamp); insertMessage(newItem, isUpload: true); }, ); } Handle Time If some messages are sent within the same minute, the time needs to be displayed only once.\nMessage_helper.dart 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 static Future\u0026lt;List\u0026lt;V2TimMessage\u0026gt;\u0026gt; processMessages(List\u0026lt;V2TimMessage\u0026gt; messages) async { if (messages.isEmpty) return messages; List\u0026lt;V2TimMessage\u0026gt; processedMessages = []; for (var i = 0; i \u0026lt; messages.length; i++) { var orgMessage = messages[i]; var message = orgMessage; message = await handleDownloadNetworkMessage(message); processedMessages.add(message); bool isLastMessageInMinuteBlock = (i + 1 == messages.length) || !DateHelper.isSameMinute(message.timestamp!, messages[i + 1].timestamp!); if (isLastMessageInMinuteBlock) { String formatTime = DateHelper.formatTime(message.timestamp!); var timeMessage = V2TimMessage( msgID: \u0026#39;time_${message.msgID}\u0026#39;, timestamp: message.timestamp, sender: null, customElem: V2TimCustomElem(data: \u0026#34;time\u0026#34;, desc: formatTime), elemType: MessageElemType.V2TIM_ELEM_TYPE_CUSTOM, ); // Check if the last added message is a duplicate time message if (processedMessages.isNotEmpty \u0026amp;\u0026amp; processedMessages.last.customElem?.desc == timeMessage.customElem?.desc \u0026amp;\u0026amp; processedMessages.last.elemType == MessageElemType.V2TIM_ELEM_TYPE_CUSTOM) { processedMessages.removeLast(); } processedMessages.add(timeMessage); } } return processedMessages; } date_helper.dart 1 2 3 4 5 6 7 8 9 10 static bool isSameMinute(int a, int b) { DateTime dateTimeA = DateTime.fromMillisecondsSinceEpoch(a * 1000); DateTime dateTimeB = DateTime.fromMillisecondsSinceEpoch(b * 1000); return dateTimeA.year == dateTimeB.year \u0026amp;\u0026amp; dateTimeA.month == dateTimeB.month \u0026amp;\u0026amp; dateTimeA.day == dateTimeB.day \u0026amp;\u0026amp; dateTimeA.hour == dateTimeB.hour \u0026amp;\u0026amp; dateTimeA.minute == dateTimeB.minute; } Conclusion âœŠ It\u0026rsquo;s quite a big task and still needs to be polished and improved in terms of performance, not only in functionality but also in UI. The next task is to support grop chat.\nIn this article, I didn\u0026rsquo;t include any UI code. If I have more time, I\u0026rsquo;ll probably write another article about custom UI.\n", 
            "url": "https:\/\/hupochuanbird.github.io\/posts\/tencentim-in-flutter\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/categories\/dublin\/": {
            "title": "Dublin",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/categories\/dublin\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/gallery\/dublin-mountain\/": {
            "title": "Dublin Mountain",
            "tags": ["Hiking",],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/gallery\/dublin-mountain\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/tags\/hiking\/": {
            "title": "Hiking",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/tags\/hiking\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/gallery\/dublin-howth\/": {
            "title": "Dublin Howth",
            "tags": ["Hiking",],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/gallery\/dublin-howth\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/categories\/howth\/": {
            "title": "Howth",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/categories\/howth\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/gallery\/": {
            "title": "My Life",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/gallery\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/posts\/make-horizontal-menu-auto-scroll-with-vertical-product-list\/": {
            "title": "Make Horizontal Menu Auto Scroll With Vertical Product List in flutter",
            "tags": ["flutter",],
            "content": " My article is referencing https://stackoverflow.com/questions/67195205/how-to-make-horizontal-menu-auto-scroll-with-vertical-product-list-in-flutter. However, in my case, the width of each category\u0026rsquo;s name and the height of each product card are dynamic and subject to slight changes. Now, let\u0026rsquo;s proceed.\nThe final result My Logic Well, based on that article, I came up with some innovations. In order to explain easily, I have drawn a draft below:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 category1 | category2 | category3 .... category1-section (section1 --\u0026gt; height: 300) ---product1-1 ---product1-2 ---product1-3 ---product1-4 category2-section (section2 --\u0026gt; height: 120) ---product2-1 ---product2-2 category3-section (section4 --\u0026gt; height: 250) ---product3-1 ---product3-2 ---product3-3 . . . The UI looks like this. The basic logic involves calculating the height of each category and its products using the scrollController.addListener function to monitor the current scroll offset. For instance, if the height of the section for category1 is 300 and the height of the section for category2 is 120, when the offset reaches 300, it implies that the currentIndex is 1, and the interface should jump to the position of category2. The currentIndex indicates horizontal menu.\nThe challenge lies in calculating the height of each section. I have set up a unique key for each category-section and know the number of products in each section. The formula is height of category1-section + height of product card * count, the name of each menu is width of text.\nCode Part Initialize Initialize variables 1 2 3 4 final ScrollController _scrollController = ScrollController(); final ScrollController _scrollControllerCategory = ScrollController(); final List\u0026lt;double\u0026gt; _categoryOffsets = \u0026lt;double\u0026gt;[]; late List\u0026lt;double\u0026gt; _productOffsets = \u0026lt;double\u0026gt;[]; Add Listener to know the offset Because horizontal and vertical scrolling need to be synchronized with each other. So there are two ScrollController, one is for horizontal list(product), another is for vertical list(menu)\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 @override void initState() { super.initState(); WidgetsBinding.instance.addPostFrameCallback((_) { if (mounted) { currentIndex = 0; _scrollController.addListener(() { setCategoryOffsets(); setProductOffsets(); final double offset = _scrollController.offset; for (int i = 0; i \u0026lt; _productOffsets.length; i++) { if (offset \u0026lt;= _productOffsets[i]) { if (currentIndex != i) { if (i \u0026gt; 0) { double diff1 = (offset - _productOffsets[i - 1]).abs(); double diff2 = (offset - _productOffsets[i]).abs(); if (diff1 \u0026gt; diff2) return; } double maxOffset = _scrollControllerCategory.position.maxScrollExtent + 100; if (_categoryOffsets[i] \u0026lt;= maxOffset) { _scrollControllerCategory.animateTo( (_categoryOffsets[i]).toDouble(), duration: const Duration(milliseconds: 500), curve: Curves.easeInOut, ); } setState(() =\u0026gt; currentIndex = i); } break; } } }); } }); } Calculate offset(height) of each product\u0026rsquo;s section Here the format of cateProductList roughly looks like 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 [ { \u0026#34;id\u0026#34;: 1, \u0026#34;name\u0026#34;: \u0026#34;category 1\u0026#34;, \u0026#34;key\u0026#34;: \u0026#34;GlobalKeykey1\u0026#34;, \u0026#34;product\u0026#34;: [ { \u0026#34;id\u0026#34;: 1, \u0026#34;name\u0026#34;: \u0026#34;product name1\u0026#34; }, { \u0026#34;id\u0026#34;: 2, \u0026#34;name\u0026#34;: \u0026#34;product name2\u0026#34; }, { \u0026#34;id\u0026#34;: 3, \u0026#34;name\u0026#34;: \u0026#34;product name3\u0026#34; } ] }, { \u0026#34;id\u0026#34;: 2, \u0026#34;name\u0026#34;: \u0026#34;category 2\u0026#34;, \u0026#34;key\u0026#34;: \u0026#34;GlobalKeykey2\u0026#34;, \u0026#34;product\u0026#34;: [ { \u0026#34;id\u0026#34;: 4, \u0026#34;name\u0026#34;: \u0026#34;product name4\u0026#34; }, { \u0026#34;id\u0026#34;: 5, \u0026#34;name\u0026#34;: \u0026#34;product name5\u0026#34; } ] } ] The first offset is 0, the second is first + itself.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 final double _productItemExtent = 122; late double _productItemHeight = 120; void setProductOffsets() { double tmp = !ResponsiveHelper.isMobile() ? 150 : 120; if (_productOffsets.isNotEmpty \u0026amp;\u0026amp; _productItemHeight == tmp) return; _productItemHeight = tmp; _productOffsets = []; WidgetsBinding.instance.addPostFrameCallback((_) { List\u0026lt;CategoryProductsModel\u0026gt; cateProductList = getCateProductList(); for (int i = 1; i \u0026lt;= (cateProductList).length; i++) { CategoryProductsModel categoryProductsModel = cateProductList[i - 1]; final double prevOffset = i == 1 ? _productItemExtent : _productOffsets[i - 2]; _productOffsets.add(prevOffset + (Dimensions.paddingSizeSmall * 2 + Dimensions.paddingSizeLarge * 3 + getHeightOfContainer(GlobalObjectKey(categoryProductsModel.id!)) + (_productItemHeight) * (categoryProductsModel.products ?? []).length)); } }); } double getHeightOfContainer(GlobalKey key) { RenderBox renderBox = key.currentContext!.findRenderObject() as RenderBox; return renderBox.size.height; } Calculate offset(height) of each category Becasue of GlobalKey, It\u0026rsquo;s easier to know category\u0026rsquo; width. 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 void setCategoryOffsets() { if (_categoryOffsets.isNotEmpty) return; List\u0026lt;CategoryProductsModel\u0026gt; cateProductList = getCateProductList(); _categoryOffsets.add(0); for (int i = 1; i \u0026lt;= (cateProductList).length; i++) { CategoryProductsModel categoryProductsModel = cateProductList[i - 1]; double cateWidth = getWidthOfContainer(categoryProductsModel.key!); double prevOffset = _categoryOffsets[i - 1]; _categoryOffsets.add(prevOffset + cateWidth); } } double getWidthOfContainer(GlobalKey key) { RenderBox renderBox = key.currentContext!.findRenderObject() as RenderBox; return renderBox.size.width; } Part of UI I delete some not important part, like styles, padding\u0026hellip;.\nCategory List, Horizontal Scroll Just remind: 1 2 3 currentIndex = index; final context = GlobalObjectKey(categoryProductsModel.id!).currentContext!; Scrollable.ensureVisible(context, duration: const Duration(milliseconds: 800), curve: Curves.ease); The code above indicates that clicking the category name will result in jumping to the corresponding product list section.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 // category view SingleChildScrollView( scrollDirection: Axis.horizontal, controller: scrollController, physics: const ScrollPhysics( parent: AlwaysScrollableScrollPhysics(), ), child: Row( mainAxisSize: MainAxisSize.min, mainAxisAlignment: MainAxisAlignment.spaceEvenly, children: List.generate(categories.length, (index) { CategoryProductsModel categoryProductsModel = categories[index]; return Padding( key: categories[index].key!, child: Container( height: 35, padding: const EdgeInsets.all(8.0), decoration: BoxDecoration( borderRadius: BorderRadius.circular(12.0), color: currentIndex == index ? Theme.of(context).primaryColor : Colors.transparent, ), child: InkWell( onTap: () { currentIndex = index; final context = GlobalObjectKey(categoryProductsModel.id!).currentContext!; Scrollable.ensureVisible(context, duration: const Duration(milliseconds: 800), curve: Curves.ease); }, child: Text( categories[index].name!, style: textMedium.copyWith( color: currentIndex == index ? Colors.white : Colors.black, ), ), )), ); }), ), ) Product List Vertical Scroll 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 Column( children: List.generate(categories.length, (index) { CategoryProductsModel categoryProductsModel = categories[index]; int productLen = (categoryProductsModel.products ?? []).length; return Column( children: [ Container( alignment: Alignment.topLeft, child: Column( crossAxisAlignment: CrossAxisAlignment.start, children: [ Container( key: GlobalObjectKey(categoryProductsModel.id!), alignment: Alignment.centerLeft, child: Column( mainAxisAlignment: MainAxisAlignment.start, crossAxisAlignment: CrossAxisAlignment.start, children: [ Text( categoryProductsModel.name ), Text( categoryProductsModel.description, ), ], ), ), // product listview ListView.builder( controller: ScrollController(), physics: const NeverScrollableScrollPhysics(), shrinkWrap: true, itemCount: productLen, itemBuilder: (BuildContext context, int indexProduct) { Product product = categoryProductsModel.products![indexProduct]; return ProductWidget( product: product, ); }, ), ], ), ), ], ); })); Okay, everything has done.\n", 
            "url": "https:\/\/hupochuanbird.github.io\/posts\/make-horizontal-menu-auto-scroll-with-vertical-product-list\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/tags\/hugo\/": {
            "title": "hugo",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/tags\/hugo\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/categories\/hugo\/": {
            "title": "hugo",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/categories\/hugo\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/tags\/lunr.js\/": {
            "title": "lunr.js",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/tags\/lunr.js\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/tags\/search-index\/": {
            "title": "search-index",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/tags\/search-index\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/posts\/setup-search-in-hugo\/": {
            "title": "Setup Search in Hugo",
            "tags": ["search-index","hugo","lunr.js",],
            "content": " In this article, I will show you how to implement search in Hugo by using Lunr.js, a lightweight JavaScript search engine. Adding search functionality to your Hugo website enhances user experience and makes it easier for visitors to find relevant content. We will explore the steps involved in integrating Lunr.js, creating a search index from your Hugo content, and incorporating the search feature into your website.\nRefer link Every step I was following this useful article. https://victoria.dev/blog/add-search-to-hugo-static-sites-with-lunr/ But I also did some changes, like real-time search without refreshing the page.\nImport lunr.js Firstly, import lunr.js or you can run npm install it. Here I chose import lunr.js cdn.\n1 \u0026lt;script src=\u0026#34;https://unpkg.com/lunr/lunr.js\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; Create a search form partial To conveniently position your search form on any desired location within your website, generate the form as a partial template. Save this template as search-form.html within the layouts/partials/ directory.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 \u0026lt;style\u0026gt; .input-container { width: 220px; position: relative; } .icon { position: absolute; right: 10px; top: calc(50% + 5px); transform: translateY(calc(-50% - 5px)); } .input { width: 100%; height: 40px; padding: 10px; transition: .2s linear; border: 2.5px solid black; font-size: 14px; letter-spacing: 2px; } .input:focus { outline: none; border: 0.5px solid black; box-shadow: -5px -5px 0px black; } .input-container:hover \u0026gt; .icon { animation: anim 1s linear infinite; } @keyframes anim { 0%, 100% { transform: translateY(calc(-50% - 5px)) scale(1); } 50% { transform: translateY(calc(-50% - 5px)) scale(1.1); } } \u0026lt;/style\u0026gt; \u0026lt;div class=\u0026#34; hidden sm:flex input-container ml-12\u0026#34;\u0026gt; \u0026lt;input type=\u0026#34;text\u0026#34; name=\u0026#34;text\u0026#34; id=\u0026#34;search-input\u0026#34; class=\u0026#34;input\u0026#34; placeholder=\u0026#34;search anything...\u0026#34;\u0026gt; \u0026lt;button type=\u0026#34;submit\u0026#34;\u0026gt; \u0026lt;span class=\u0026#34;icon\u0026#34;\u0026gt; \u0026lt;svg width=\u0026#34;19px\u0026#34; height=\u0026#34;19px\u0026#34; viewBox=\u0026#34;0 0 24 24\u0026#34; fill=\u0026#34;none\u0026#34; xmlns=\u0026#34;http://www.w3.org/2000/svg\u0026#34;\u0026gt;\u0026lt;g id=\u0026#34;SVGRepo_bgCarrier\u0026#34; stroke-width=\u0026#34;0\u0026#34;\u0026gt;\u0026lt;/g\u0026gt;\u0026lt;g id=\u0026#34;SVGRepo_tracerCarrier\u0026#34; stroke-linecap=\u0026#34;round\u0026#34; stroke-linejoin=\u0026#34;round\u0026#34;\u0026gt;\u0026lt;/g\u0026gt;\u0026lt;g id=\u0026#34;SVGRepo_iconCarrier\u0026#34;\u0026gt; \u0026lt;path opacity=\u0026#34;1\u0026#34; d=\u0026#34;M14 5H20\u0026#34; stroke=\u0026#34;#000\u0026#34; stroke-width=\u0026#34;1.5\u0026#34; stroke-linecap=\u0026#34;round\u0026#34; stroke-linejoin=\u0026#34;round\u0026#34;\u0026gt;\u0026lt;/path\u0026gt; \u0026lt;path opacity=\u0026#34;1\u0026#34; d=\u0026#34;M14 8H17\u0026#34; stroke=\u0026#34;#000\u0026#34; stroke-width=\u0026#34;1.5\u0026#34; stroke-linecap=\u0026#34;round\u0026#34; stroke-linejoin=\u0026#34;round\u0026#34;\u0026gt;\u0026lt;/path\u0026gt; \u0026lt;path d=\u0026#34;M21 11.5C21 16.75 16.75 21 11.5 21C6.25 21 2 16.75 2 11.5C2 6.25 6.25 2 11.5 2\u0026#34; stroke=\u0026#34;#000\u0026#34; stroke-width=\u0026#34;2.5\u0026#34; stroke-linecap=\u0026#34;round\u0026#34; stroke-linejoin=\u0026#34;round\u0026#34;\u0026gt;\u0026lt;/path\u0026gt; \u0026lt;path opacity=\u0026#34;1\u0026#34; d=\u0026#34;M22 22L20 20\u0026#34; stroke=\u0026#34;#000\u0026#34; stroke-width=\u0026#34;3.5\u0026#34; stroke-linecap=\u0026#34;round\u0026#34; stroke-linejoin=\u0026#34;round\u0026#34;\u0026gt;\u0026lt;/path\u0026gt; \u0026lt;/g\u0026gt;\u0026lt;/svg\u0026gt; \u0026lt;/span\u0026gt; \u0026lt;/button\u0026gt; \u0026lt;/div\u0026gt; Create a search index Create the search folder in layouts/partials/ path, and create a page named list.html. Include the search form in list.htm, also you can use in any other templates. 1 {{ partial \u0026#34;search-form.html\u0026#34; . }} For example: 1 2 3 4 5 6 7 8 9 10 11 12 13 \u0026lt;!-- In layouts/partials/search/list.html --\u0026gt; {{ define \u0026#34;main\u0026#34; }} \u0026lt;section class=\u0026#34;s:mt-10 mt-20\u0026#34;\u0026gt; \u0026lt;div class=\u0026#34;container sm:my-14\u0026#34; \u0026gt; \u0026lt;div class=\u0026#34;mt-20\u0026#34;\u0026gt; {{ partial \u0026#34;search-form.html\u0026#34; . }} \u0026lt;/div\u0026gt; \u0026lt;div id=\u0026#34;results\u0026#34;\u0026gt; Enter a keyword above to search this site. \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/section\u0026gt; {{ end }} Create a search page Navigate to content folder, create a folder name search, and a file _index.md\nBuild your search index In layouts/partials/ folder, create another html file search-index.html Import lunr.js cdn and search.js, I haven\u0026rsquo;t created search.js so far.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 {{ define \u0026#34;main\u0026#34; }} \u0026lt;script src=\u0026#34;https://unpkg.com/lunr/lunr.js\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; \u0026lt;script src=\u0026#34;/js/search.js\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; \u0026lt;script\u0026gt; window.store = { {{ range .Site.Pages}} \u0026#34;{{ .Permalink }}\u0026#34;: { \u0026#34;title\u0026#34;: \u0026#34;{{ .Title }}\u0026#34;, \u0026#34;tags\u0026#34;: [{{ range .Params.Tags }}\u0026#34;{{ . }}\u0026#34;,{{ end }}], \u0026#34;content\u0026#34;: {{ .Content | plainify }}, \u0026#34;url\u0026#34;: \u0026#34;{{ .Permalink }}\u0026#34; }, {{ end }} } \u0026lt;/script\u0026gt; Implement search.js Compare to this https://victoria.dev/blog/add-search-to-hugo-static-sites-with-lunr/#build-your-search-index article, I did a minor change, no need to refersh the page and get results directly.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 function displayResults (results, store) { const searchResults = document.getElementById(\u0026#39;results\u0026#39;) if (results.length) { let resultList = \u0026#39;\u0026#39; // Iterate and build result list elements for (const n in results) { const item = store[results[n].ref] resultList += \u0026#39;\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;\u0026lt;a href=\u0026#34;\u0026#39; + item.url + \u0026#39;\u0026#34;\u0026gt;\u0026#39; + item.title + \u0026#39;\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\u0026#39; resultList += \u0026#39;\u0026lt;p\u0026gt;\u0026#39; + item.content.substring(0, 150) + \u0026#39;...\u0026lt;/p\u0026gt;\u0026lt;/li\u0026gt;\u0026#39; } searchResults.innerHTML = resultList } else { searchResults.innerHTML = \u0026#39;No results found.\u0026#39; } } document.addEventListener(\u0026#39;DOMContentLoaded\u0026#39;, function () { var searchInput = document.getElementById(\u0026#39;search-input\u0026#39;); if (searchInput) { searchInput.addEventListener(\u0026#39;input\u0026#39;, function () { var query = searchInput.value.toLowerCase(); // real-time print out console.info(\u0026#34;query \u0026#34;,query) if (query) { document.getElementById(\u0026#39;search-input\u0026#39;).setAttribute(\u0026#39;value\u0026#39;, query) const idx = lunr(function () { this.ref(\u0026#39;id\u0026#39;) this.field(\u0026#39;title\u0026#39;, { boost: 15 }) this.field(\u0026#39;tags\u0026#39;) this.field(\u0026#39;content\u0026#39;, { boost: 10 }) for (const key in window.store) { this.add({ id: key, title: window.store[key].title, tags: window.store[key].category, content: window.store[key].content }) } }) const results = idx.search(query) // Update the list with results displayResults(results, window.store) }else{ const searchResults = document.getElementById(\u0026#39;results\u0026#39;) searchResults.innerHTML = \u0026#39;Enter a keyword above to search this site.\u0026#39; } }); } }) Here is the result.\n", 
            "url": "https:\/\/hupochuanbird.github.io\/posts\/setup-search-in-hugo\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/tags\/cloud\/": {
            "title": "Cloud",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/tags\/cloud\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/categories\/flarum\/": {
            "title": "Flarum",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/categories\/flarum\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/tags\/php\/": {
            "title": "PHP",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/tags\/php\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/posts\/chinese-search-in-flarum\/": {
            "title": "Ubuntu 22.04.3: Chinese Search in Flarum and How to fix \u0027PHP Notice: fwrite(): send failed with errno=32 Broken pipe\u0027 error in my case",
            "tags": ["Tutorial","Cloud","AWS","PHP",],
            "content": " The main content of this article is to use the Sonic engine to enable Flarum to search Chinese as well.\nIn my Flarum, the search module isn\u0026rsquo;t perfect enough so far, almost all the discussions are using Chinese, so the default search module doesn\u0026rsquo;t work. Here, in this section, I primarily focus on utilizing the Sonic extension to implement Chinese text search. In my case, the server-side encounters some errors. I will list how I can debug and fix them.\nExtensions Here is the plugin link.\nhttps://discuss.flarum.org/d/28826-flarum-sonic\nInstall Sonic env in Ubuntu 22.04.3 My sever is micro tier, so I will choose docker to install sonic env. If you are unfamiliar with docker, you can consider it\u0026rsquo;s a standalone container/server. In this container, you can install everything just as you would on a server.\nInstall Docker To install Docker on Ubuntu, you can follow these steps:\nUpdate your system\u0026rsquo;s package index Install the required dependencies Add the official Docker GPG key Set up the stable Docker repository (Replace $(lsb_release -cs) with the codename of your Ubuntu release if it\u0026rsquo;s not automatically detected.) Install Docker Verify that Docker is installed 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 sudo apt update sudo apt install apt-transport-https ca-certificates curl software-properties-common curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg echo \u0026#34;deb [signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable\u0026#34; | sudo tee /etc/apt/sources.list.d/docker.list \u0026gt; /dev/null # here replace $(lsb_release -cs) # for example # echo \u0026#34;deb [signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu focal stable\u0026#34; | sudo tee /etc/apt/sources.list.d/docker.list \u0026gt; /dev/null sudo apt install docker-ce docker-ce-cli containerd.io sudo docker --version when run sudo docker --version you will see the version in the terminal\nInstall Sonic in docker v1.4.8 is the latest version so far, you can replace any version you want\n1 docker pull valeriansaliou/sonic:v1.4.8 Now, create a config file for snoic, I set up config.cfg under my home folder, the path it\u0026rsquo;s up to you.\nyou need root permission.\n1 2 3 4 5 6 7 8 9 10 cd /home # create sonic folder under home path mkdir sonic sudo vim /home/sonic/config.cfg # or cd sonic sudo vim config.cfg in the config.cfg, just copy paste the default content the developer provided 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 [server] log_level = \u0026#34;error\u0026#34; [channel] inet = \u0026#34;0.0.0.0:1491\u0026#34; tcp_timeout = 30 auth_password = \u0026#34;SecretPassword\u0026#34; [channel.search] query_limit_default = 10 query_limit_maximum = 100 query_alternates_try = 4 suggest_limit_default = 5 suggest_limit_maximum = 20 [store] [store.kv] path = \u0026#34;/var/lib/sonic/store/kv/\u0026#34; retain_word_objects = 1000 [store.kv.pool] inactive_after = 1800 [store.kv.database] flush_after = 900 compress = true parallelism = 2 max_files = 100 max_compactions = 1 max_flushes = 1 write_buffer = 16384 write_ahead_log = true [store.fst] path = \u0026#34;/var/lib/sonic/store/fst/\u0026#34; [store.fst.pool] inactive_after = 300 [store.fst.graph] consolidate_after = 180 max_size = 2048 max_words = 250000 Then, save the file and exit.\nInstall Sonic extension 1 composer require ganuonglachanh/sonic Navigate to you admin panel, switch on the extension, no need to change anything, just save it.\nRunning Sonic In the server, switch to root permission to run:\n1 docker run -p 1491:1491 -v /home/sonic/config.cfg:/etc/sonic.cfg -v ~/sonic/store/:/var/lib/sonic/store/ valeriansaliou/sonic:v1.4.8 Then, navigate to fluarm folder run:\n1 php flarum sonic:addtoindex If it prints the \u0026ldquo;xxx successfully!\u0026rdquo;, you are lucky, all the steps have done! We can highlight the keyword\n1 2 3 .DiscussionListItem-main mark { background: #ffff80 !important; } Error: PHP Notice: fwrite(): send failed with errno=32 Broken pipe If there are tons of error print it out, like this, well, let\u0026rsquo;s debug it.\nâœ¨ Copy same env It\u0026rsquo;s quite complex, to be honest. I created another instance and RDS to test whether the issue is due to my server environment or something else. Additionally, I don\u0026rsquo;t want to impact my current production environment.\nOh, also need to create a new security group, and open port 80, 22(If you don\u0026rsquo;t mind the security issue in test env, also can allow all traffic)\nJust make the version is the same as the production env.\nFollow my previous blog, I installed php env, composer, and flarum.\nDon\u0026rsquo;t forget to edit composer.json file, and delete composer.lock. Then install again. The CLI is 1 composer install After that, In RDS section, need to set up EC2 connection.\nAlso I exported my sql from RDS, and imported my test mysql env.\nDebug in Test env Now, follow the snoic installation. In snoic source code, we can find the entry. I don\u0026rsquo;t understand PHP code, but I know where the error is printed out. The logic is to retrieve all the public posts and push them somewhere. In this code, I need to find where the first error occurs.\nI changed the code directly, added a break inside the loop, and printed every content retrieved. 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 foreach ($posts as $post) { $start = microtime(true); $content = strip_tags($post-\u0026gt;content); if (trim($content) !== \u0026#39;\u0026#39;) { try { $this-\u0026gt;info(\u0026#34;Post ID: {$post-\u0026gt;id}, Content: $content\u0026#34;); $ingest-\u0026gt;push(\u0026#39;postCollection\u0026#39;, \u0026#39;flarumBucket\u0026#39;, $post-\u0026gt;id, $content, $locale); } catch (\\Throwable $e) { $this-\u0026gt;info(PHP_EOL); $this-\u0026gt;error(\u0026#34;Post id {$post-\u0026gt;id} with \u0026#34; . strlen($content) . \u0026#39; bytes of content failed after \u0026#39; . round((microtime(true) - $start) * 1000, 2) . \u0026#39;ms\u0026#39;); break; // Break out of the loop on exception } } $progress-\u0026gt;advance(); } I received 700 normal contents, and then it jumped out of the loop. Now I see that the error part is very long and large because one of the users typed a lot of content in one section.\nI have two solutions: split the content or simply ignore long content. I choose the latter one, as it is easier, albeit at the cost of some search accuracy\n1 2 3 4 5 6 7 8 $posts = Post::select(\u0026#39;id\u0026#39;, \u0026#39;content\u0026#39;) -\u0026gt;where(\u0026#39;type\u0026#39;, \u0026#39;=\u0026#39;, \u0026#39;comment\u0026#39;) -\u0026gt;where(\u0026#39;is_approved\u0026#39;, 1) -\u0026gt;where(\u0026#39;is_private\u0026#39;, 0) -\u0026gt;whereNull(\u0026#39;hidden_at\u0026#39;) -\u0026gt;whereBetween(\u0026#39;id\u0026#39;, [1, 1130]) -\u0026gt;orWhereBetween(\u0026#39;id\u0026#39;, [1134, 1172]) -\u0026gt;get(); I already know the post ID for the long content, so I skipped those. Then, I ran the CLI in the Flarum path: 1 php flarum sonic:addtoindex All the test pass!\nI also try to split the content, but didn\u0026rsquo;t workğŸ˜­ğŸ˜­ğŸ˜­, can anyone tell me the reason?\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 $chunkSize = 10000; // Set your desired chunk size foreach ($posts as $post) { $this-\u0026gt;info(\u0026#34;Post ID: {$post-\u0026gt;id}, Content: {$post-\u0026gt;content}\u0026#34;); $start = microtime(true); $content = strip_tags($post-\u0026gt;content); // Split the content into chunks $contentChunks = str_split($content, $chunkSize); foreach ($contentChunks as $chunk) { if (trim($chunk) !== \u0026#39;\u0026#39;) { try { $ingest-\u0026gt;push(\u0026#39;postCollection\u0026#39;, \u0026#39;flarumBucket\u0026#39;, $post-\u0026gt;id, $chunk, $locale); } catch (\\Throwable $e) { $this-\u0026gt;info(PHP_EOL); $this-\u0026gt;error(\u0026#34;Post id {$post-\u0026gt;id} with \u0026#34; . strlen($chunk) . \u0026#39; bytes of content failed after \u0026#39; . round((microtime(true) - $start) * 1000, 2) . \u0026#39;ms\u0026#39;); break 2; // Break out of both inner and outer loops on exception } } } $progress-\u0026gt;advance(); } ", 
            "url": "https:\/\/hupochuanbird.github.io\/posts\/chinese-search-in-flarum\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/gallery\/bohernabreena-reservoir-park\/": {
            "title": "Bohernabreena Reservoir Park",
            "tags": ["Cycling",],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/gallery\/bohernabreena-reservoir-park\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/tags\/cycling\/": {
            "title": "Cycling",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/tags\/cycling\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/posts\/flarum-connects-to-aws-rds\/": {
            "title": "Flarum Connects to AWS RDs",
            "tags": ["Tutorial","Cloud","AWS","RDs",],
            "content": " For the majority tutorial, the flarum always connects with the localhost db directly. However, base on my knowledge, once the server shutdown or reboot, the data could be lost, also it\u0026rsquo;s not easy to debug(although flaurm has logs files to record all errors). So I suppose that separate db and flaurm server.\nIn this section, I use AWS EC2 and RDs to implement my solution.\nFor how to deploy the Flarum in EC2, I will write author article, but to be honest, it\u0026rsquo;s the common way for deploying to any other Linux server.\nPreparation Creating a Database Setting the security group Testing locally(I use navicat) Updating the config.php in Flarum Creating a Database Here I choose the free tier of RDs which only for the new register user in 12 months.\n1. Navigate to RDS 2. Create a DB Here is my choice, I use mysql and free tier type.\nHere I select public access directly, because I need to test the connection and create flarum_db locally. (If you forget, just click [modify] button to select the option)\n3. Waiting for initialization Then the new record has created now.\nIn the Connectivity \u0026amp; security , Endpoint is the connection link.\nUpdate the security group Although, It can be accessed publicly, but might show [1002 fail connect to db ] error.\nClick [VPC security groups] to navigate to the Security Groups panel. Edit the Inbound rule.\nTurn on 3360 port is necessary, and I allow all the traffic to access(In production env, need to delete)\nTesting locally 1. Create a new connection Paste the Endpoint and the username/password, and test connection. In my case, it connects to RDs expectly.\nFlarum part If You have deployed Flarum before, just change the config.php. If You are in the initialization step, just directly fill in RDs.\nHere is the CLI to the folder I deploy the flarum.\n1 2 3 4 5 6 7 8 cd /var/www/html/forum/ // admin role sudo su ls vim config.php //exist and save :wq Thanks!\n", 
            "url": "https:\/\/hupochuanbird.github.io\/posts\/flarum-connects-to-aws-rds\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/tags\/rds\/": {
            "title": "RDs",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/tags\/rds\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/categories\/cloud\/": {
            "title": "Cloud",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/categories\/cloud\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/tags\/database\/": {
            "title": "database",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/tags\/database\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/posts\/flarum-connect-to-clouddb\/": {
            "title": "Flarumæ¡†æ¶å¦‚ä½•è¿æ¥äº‘ç«¯æ•°æ®åº“ï¼Œä¿è¯æ•°æ®ä¸€è‡´æ€§",
            "tags": ["database",],
            "content": "æœ¬æ–‡åŸºäºä½œè€…çš„ç†è§£ï¼Œå¦‚æœ‰é”™è¯¯ï¼Œæ¬¢è¿æŒ‡æ­£\nè€ƒè™‘åˆ°æœªæ¥æ•°æ®é‡è¿‡å¤§çš„æƒ…å†µä¸‹ï¼Œæ•°æ®è¿ç§»ä¼šå¾ˆéº»çƒ¦ï¼Œæœ¬åœ°éƒ¨ç½²æ¯æ¬¡éƒ½æ˜¯é‡æ–°åˆ›å»ºã€‚æ‰€ä»¥æœ¬åœ°å’Œäº‘ç«¯å¿…é¡»è¦ä¿æŒæ•°æ®ä¸€è‡´ï¼Œå¹¶ä¸”å®šæœŸåšæ•´ä¸ªæ•°æ®åº“çš„å¤‡ä»½ã€‚\nç®€å•çš„æ€è·¯å°±æ˜¯ï¼Œåœ¨æœ¬åœ°æ­å»ºä¸€ä¸ªæ–°çš„æ¡†æ¶å¹¶ä¸”è¿è¡Œèµ·æ¥ (æœ¬åœ°æ­å»º), è¿æ¥äº‘ç«¯æ•°æ®åº“æˆ–è€…å§äº‘ç«¯æ•°æ®åº“æ‹·è´æœ¬åœ°è¿è¡Œã€‚å¹¶ä¸”éœ€è¦æŠŠæ’ä»¶åŒ…æœ¬åœ°å®‰è£…ä¸€éï¼Œæ¥ä¿è¯äº‘ç«¯å’Œæœ¬åœ°çš„æ•°æ®ä¸€è‡´æ€§ã€‚ è¿æ¥äº‘ç«¯æ•°æ®åº“ åŒæ­¥æ’ä»¶åº“ äº‘ç«¯æ•°æ®åº“ä¸‹è½½åˆ°æœ¬åœ°è¿è¡Œ ä¸ºäº†ç®€åŒ–æ“ä½œæ‰ç›´æ¥è¿äº‘ç«¯æ•°æ®åº“çš„ï¼Œå®é™…ä¸Šåœ¨å¼€å‘ç¯å¢ƒä¸å…è®¸ç›´æ¥æ“ä½œç”Ÿäº§ç¯å¢ƒçš„æ•°æ®ã€‚æ‰€ä»¥å¯ä»¥çœç•¥ç¬¬ä¸€æ­¥ã€‚\n1ï¸âƒ£ Connect CloudDB æ ¹æ®ä¸Šæ–‡ï¼Œåœ¨é¦–é¡µè¾“å…¥æ•°æ®åº“ä¿¡æ¯ï¼Œflarumæ¡†æ¶ä¼šè‡ªåŠ¨åˆ›å»ºé»˜è®¤çš„æ‰€æœ‰è¡¨ã€‚åœ¨é¡¹ç›®æ–‡ä»¶ä¸­ï¼Œconfig.phpå°±æ˜¯å­˜æ”¾æ•°æ®åº“ä¿¡æ¯çš„é…ç½®æ–‡ä»¶ã€‚\né»˜è®¤ç”Ÿæˆçš„é…ç½®æ–‡ä»¶ è¦è¿æ¥Flarumåˆ°äº‘æ•°æ®åº“ï¼Œä½ éœ€è¦è¿›è¡Œä»¥ä¸‹æ­¥éª¤ï¼š\nè·å–äº‘æ•°æ®åº“çš„è¿æ¥ä¿¡æ¯ï¼ŒåŒ…æ‹¬ä¸»æœºåï¼ˆIPåœ°å€æˆ–åŸŸåï¼‰ã€ç«¯å£å·ã€æ•°æ®åº“åç§°ã€ç”¨æˆ·åå’Œå¯†ç ã€‚ æ‰“å¼€Flarumçš„é…ç½®æ–‡ä»¶ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œè¯¥æ–‡ä»¶ä½äºFlarumæ ¹ç›®å½•ä¸‹çš„config.phpæ–‡ä»¶ã€‚ åœ¨é…ç½®æ–‡ä»¶ä¸­ï¼Œæ‰¾åˆ°æ•°æ®åº“ç›¸å…³çš„é…ç½®éƒ¨åˆ†ã€‚è¿™æ˜¯é»˜è®¤çš„ç»“æ„ï¼š 1 2 3 4 5 6 7 8 9 10 11 \u0026#39;database\u0026#39; =\u0026gt; [ \u0026#39;driver\u0026#39; =\u0026gt; \u0026#39;mysql\u0026#39;, \u0026#39;host\u0026#39; =\u0026gt; \u0026#39;localhost\u0026#39;, \u0026#39;database\u0026#39; =\u0026gt; \u0026#39;flarum\u0026#39;, \u0026#39;username\u0026#39; =\u0026gt; \u0026#39;root\u0026#39;, \u0026#39;password\u0026#39; =\u0026gt; \u0026#39;\u0026#39;, \u0026#39;charset\u0026#39; =\u0026gt; \u0026#39;utf8mb4\u0026#39;, \u0026#39;collation\u0026#39; =\u0026gt; \u0026#39;utf8mb4_unicode_ci\u0026#39;, \u0026#39;prefix\u0026#39; =\u0026gt; \u0026#39;\u0026#39;, \u0026#39;strict\u0026#39; =\u0026gt; false, ], æ ¹æ®äº‘æ•°æ®åº“æä¾›çš„è¿æ¥ä¿¡æ¯ï¼Œå°†ä¸Šè¿°ä»£ç ä¸­çš„ä¸»æœºåã€æ•°æ®åº“åç§°ã€ç”¨æˆ·åå’Œå¯†ç ç­‰ä¿¡æ¯è¿›è¡Œç›¸åº”çš„æ›´æ”¹ã€‚ 1 2 3 4 5 6 7 8 9 10 11 \u0026#39;database\u0026#39; =\u0026gt; [ \u0026#39;driver\u0026#39; =\u0026gt; \u0026#39;mysql\u0026#39;, \u0026#39;host\u0026#39; =\u0026gt; \u0026#39;your-cloud-db-hostname\u0026#39;, \u0026#39;database\u0026#39; =\u0026gt; \u0026#39;your-cloud-db-name\u0026#39;, \u0026#39;username\u0026#39; =\u0026gt; \u0026#39;your-cloud-db-username\u0026#39;, \u0026#39;password\u0026#39; =\u0026gt; \u0026#39;your-cloud-db-password\u0026#39;, \u0026#39;charset\u0026#39; =\u0026gt; \u0026#39;utf8mb4\u0026#39;, \u0026#39;collation\u0026#39; =\u0026gt; \u0026#39;utf8mb4_unicode_ci\u0026#39;, \u0026#39;prefix\u0026#39; =\u0026gt; \u0026#39;\u0026#39;, \u0026#39;strict\u0026#39; =\u0026gt; false, ], é…ç½®å®Œæˆåé‡å¯apacheæœ¬åœ°æœåŠ¡å™¨å°±èƒ½çœ‹åˆ°ä½ åœ¨äº‘ç«¯çš„ä¸€äº›ä¿®æ”¹ã€‚\n2ï¸âƒ£ Sync plugin å…‰è¿æ¥æ•°æ®åº“è®¿é—®ä¸»é¡µä¹Ÿè®¸ä¼šå‡ºé”™ï¼Œç‰¹åˆ«æ˜¯åœ¨é¡¹ç›®å·²ç»å¾ˆå¤§çš„æƒ…å†µä¸‹ï¼Œæ‰€ä»¥å¿…é¡»åŒæ­¥æ’ä»¶åº“ã€‚\nåœ¨äº‘ç«¯Flarumæ ¹ç›®å½•ä¸­ï¼Œæ‰¾åˆ°ä»¥ä¸‹ä¸¤ä¸ªæ–‡ä»¶ ï¼šcomposer.json \u0026amp; composer.lock å°†è¿™ä¸¤ä¸ªæ–‡ä»¶å¤åˆ¶åˆ°æœ¬åœ°Flarumçš„æ ¹ç›®å½•ä¸­ã€‚ æ‰“å¼€å‘½ä»¤è¡Œç»ˆç«¯ï¼Œè¿›å…¥æœ¬åœ°Flarumçš„æ ¹ç›®å½•ã€‚\nè¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œä»¥å®‰è£…æˆ–æ›´æ–°æœ¬åœ°Flarumæ‰€éœ€çš„æ–‡ä»¶åŒ…ï¼š\n1 composer install åŒæ­¥å®Œæˆååˆ·æ–°é¡µé¢ï¼Œæ­¤æ—¶äº‘ç«¯å’Œæœ¬åœ°çš„æ•°æ®ä¿æŒä¸€è‡´ã€‚\n3ï¸âƒ£ download cloud DB and run locally ç›´æ¥åœ¨æœ¬åœ°è¿æ¥æ•°æ®åº“æ˜¯æœ‰é£é™©çš„ï¼Œæ¯”å¦‚ç«¯å£æš´éœ²ï¼Œé˜²ç«å¢™å…³é—­ï¼Œä¸å®‰å…¨æ“ä½œæ•°æ®ç­‰ã€‚æ‰€ä»¥æœ€å¥½çš„åŠæ³•å°±æ˜¯æŠŠæ•°æ®åº“ä¸‹è½½ä¸‹æ¥ã€‚\nâŒ Mysql error 2002 ä¸å‡ºæ„å¤–ï¼Œä½¿ç”¨navicatè¿æ¥äº‘ç«¯å¤±è´¥ã€‚ MySQLè¿œç¨‹è¿æ¥æŠ¥é”™ï¼šERROR 2002 (HY000): Canâ€˜t connect to server on â€˜ipâ€˜\næ˜¾ç„¶ï¼Œè®¿é—®è¢«æ‹¦æˆªã€‚ è¿™ç¯‡æ–‡ç« å¯ä»¥å®Œç¾çš„è§£å†³è¿™ä¸ªé—®é¢˜ã€‚\nğŸ€ .sql to loacalDB æˆ‘ç”¨navicatæ¥è¿æ¥æ•°æ®åº“ï¼Œç›´æ¥exportæ•°æ®å’Œç»“æ„çš„sqlæ–‡ä»¶ã€‚\nå†åœ¨è¿›å…¥XMAPPæ•°æ®åº“ç•Œé¢ï¼Œè¿è¡Œå³å¯ã€‚âš ï¸æ³¨æ„ï¼Œåˆ«å¿˜è®°ä¿®æ”¹conf.phpæ•°æ®åº“é…ç½®æ–‡ä»¶ã€‚\n", 
            "url": "https:\/\/hupochuanbird.github.io\/posts\/flarum-connect-to-clouddb\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/categories\/apache\/": {
            "title": "Apache",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/categories\/apache\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/tags\/localdepoly\/": {
            "title": "LocalDepoly",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/tags\/localdepoly\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/tags\/macos\/": {
            "title": "MacOS",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/tags\/macos\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/posts\/depoly-locally-macos-apache2\/": {
            "title": "ä½¿ç”¨XAMPPæœ¬åœ°éƒ¨ç½²Flarumåœ¨MACç¯å¢ƒä¸­",
            "tags": ["MacOS","LocalDepoly",],
            "content": "ç®€å•çš„æµç¨‹åªæœ‰ä¸‰ä¸ªï¼Œä¸è¿‡éƒ¨ç½²ä¼šé‡åˆ°å¾ˆå¤šé—®é¢˜ï¼Œmacè‡ªå¸¦apacheçš„é…ç½®æˆ‘å®åœ¨æ˜¯æ²¡å¼„å¥½ï¼Œè¿˜æ˜¯ä¸‹è½½äº†XAMPPæ¥éƒ¨ç½²ã€‚\nä¸‹è½½XAMPP ä¸‹è½½composer ä¸‹è½½Flarum 1ï¸âƒ£ Download XAMPP è¿›å…¥å®˜ç½‘ï¼Œé€‰æ‹©OS Xæ“ä½œç³»ç»Ÿã€‚ åŒå‡»dmgå¯èƒ½ä¼šå‡ºç°ä¸å…è®¸å®‰è£…çš„æƒ…å†µã€‚å¦‚æœå‡ºç°è¿™ç§æƒ…å†µéœ€è¦è¿›å…¥å®‰å…¨\u0026amp;éšç§ï¼Œè¾“å…¥å¯†ç ç‚¹å‡»åŒæ„å°±å¯ä»¥ç»§ç»­å®‰è£…äº†ã€‚\nå‚»ç“œå®‰è£…ï¼Œå®Œæˆåè¿è¡Œã€‚\nğŸŒ²Config in XAMPP ä¹Ÿè®¸ä½ çš„ç”µè„‘å·²ç»è¿è¡Œäº†mysqlï¼Œé‚£ä¹ˆåœ¨XAMPPä¸­ï¼Œæ•°æ®åº“å°±ä¸ä¼šè¿è¡Œã€‚\nå¦‚æœå‡ºç°è¿™ç§æƒ…å†µï¼Œç‚¹å‡»æ•°æ®åº“çš„é…ç½®ï¼ŒæŠŠç«¯å£å·ä¿®æ”¹ä¸º4306ï¼Œ å¦å¤–ç‚¹å‡»ã€Open Conf Fileã€‘ï¼Œä¿®æ”¹ç«¯å£å·ã€‚ ä¿å­˜é€€å‡ºåï¼Œç‚¹å‡»startå³å¯ã€‚\nåšå®Œä¸Šé¢ä¸¤ä¸ªæ­¥éª¤ï¼ŒApacheå’Œæ•°æ®åº“éƒ½æ˜¯è¿è¡ŒçŠ¶æ€ï¼Œç‚¹å‡»æœ¬åœ°è¿è¡Œé“¾æ¥ï¼Œå¦‚æœèƒ½çœ‹åˆ°XAMPPä¸»é¡µè¯´æ˜ç›®å‰æ²¡æœ‰é—®é¢˜ã€‚\nç‚¹å‡»phpmyadminï¼Œè¿›å…¥æ•°æ®åº“é…ç½®ã€‚å‰ä¸€ç¯‡æ–‡ç« çš„æ•°æ®åº“ä¿¡æ¯ç›´æ¥æ¬è¿‡æ¥ï¼Œç›´æ¥è¿è¡Œsqlè¯­å¥åˆ›å»ºæ•°æ®åº“ä»¥åŠç”¨æˆ·ã€‚ 1 2 3 4 CREATE DATABASE flarum_db; CREATE USER \u0026#39;flarum_user\u0026#39;@\u0026#39;localhost\u0026#39; IDENTIFIED BY \u0026#39;flarum_pass\u0026#39;; GRANT ALL PRIVILEGES ON flarum_db.* TO \u0026#39;flarum_user\u0026#39;@\u0026#39;localhost\u0026#39;; FLUSH PRIVILEGES; åˆ›å»ºå®Œæˆåå¯ä»¥åœ¨å·¦ä¾§çœ‹åˆ°ç›¸å…³çš„æ•°æ®åº“ï¼Œåªä¸è¿‡è¿™ä¸ªæ—¶å€™ï¼Œæ•°æ®åº“æ˜¯ç©ºçš„ã€‚ åˆ°ç›®å‰ä¸ºæ­¢ï¼ŒXAMPPåŸºç¡€éƒ¨ç½²å·²ç»å®Œæˆï¼Œæ¥ä¸‹æ¥éœ€è¦ä¸‹è½½Composerã€‚å¦‚æœå·²ç»ä¸‹è½½è¿‡é‚£ä¹ˆå°±è·³è¿‡è¿™ä¸€æ­¥ã€‚\n2ï¸âƒ£ Download Composer ç‚¹å‡»ä¸»é¡µï¼Œç›´æ¥è·Ÿç€å‘½ä»¤èµ°ä¸€éå°±å¯ä»¥äº†ã€‚ è¾“å…¥å‘½ä»¤æŸ¥çœ‹æ˜¯å¦å®‰è£…æˆåŠŸ 1 composer -v 3ï¸âƒ£ Download Flarum é¦–å…ˆï¼Œè¿™ä¸ªæ¡†æ¶æ”¾åœ¨å“ªé‡Œï¼ŒapacheæœåŠ¡å™¨æ€ä¹ˆé…ç½®éœ€è¦å¼„æ˜ç™½ã€‚æ‰¾åˆ°XAMPPçš„å®‰è£…è·¯å¾„ï¼Œåœ¨MACä¸­ï¼Œæ­¤è·¯å¾„æ˜¯ /Applications/XAMPP\nå‘½ä»¤pwdæŸ¥çœ‹è·¯å¾„ã€‚\nğŸ‘‰ Download Flarum in correct path Flarumæ¡†æ¶ä¸‹è½½çš„ä½ç½®åœ¨ /Applications/XAMPP/xamppfiles/htdocs/flarumï¼Œhtdocsæ–‡ä»¶å¤¹ä¸‹æ²¡æœ‰flarumè¿™ä¸ªæ–‡ä»¶å¤¹ï¼Œæ‰€ä»¥éœ€è¦åˆ›å»ºä¸€ä¸ªã€‚\n1 2 cd /Applications/XAMPP/xamppfiles/htdocs/ mkdir flarum åˆ›å»ºå®Œæˆåï¼Œè¿›å…¥æ­¤æ–‡ä»¶å¤¹ï¼Œè¾“å…¥ä¸‹è½½å‘½ä»¤ã€‚ 1 2 3 4 5 cd /flarum // æ£€æŸ¥è·¯å¾„æ˜¯å¦æ­£ç¡® pwd // ä¸‹è½½ composer create-project flarum/flarum . --stability=beta ğŸ‘‰Apache config edit è¿”å›XAMPPç•Œé¢ï¼Œç‚¹å‡»ApacheæœåŠ¡é…ç½®ï¼Œç‚¹å‡»ã€Open Config Fileã€‘ï¼Œæ‰¾åˆ° ã€Œ\u0026lt;Directoryã€æ ‡ç­¾ï¼Œé»˜è®¤çš„è·¯å¾„æ˜¯â€œ/Applications/XAMPP/xamppfiles/htdocsâ€\n1 2 3 4 5 \u0026lt;Directory \u0026#34;/Applications/XAMPP/xamppfiles/htdocs\u0026#34;\u0026gt; Options Indexes FollowSymLinks ExecCGI Includes AllowOverride All Require all granted \u0026lt;/Directory\u0026gt; ä½ å¯ä»¥é€‰æ‹©ä¸ä¿®æ”¹ï¼Œå› ä¸ºFlarumæ–‡ä»¶å¤¹å°±åœ¨htdocsæ–‡ä»¶ä¸‹ä¸‹é¢ï¼Œé‚£è¿™æ ·å­çš„è®¿é—®è·¯å¾„å°±æ˜¯â€œhttp://localhost/flarum/public/â€ã€‚å¦‚æœFlarumæ¡†æ¶çš„ä¸‹è½½åœ°å€ä¸åœ¨htdocsæ–‡ä»¶å¤¹ä¸‹ï¼Œé‚£ä¹ˆéœ€è¦æŒ‡å®šæ­£ç¡®çš„æ–‡ä»¶å¤¹è·¯å¾„ã€‚ å¦‚æœä½ æ²¡æœ‰å‡ºç°è¿™ä¸ªç•Œé¢ï¼Œè€Œæ˜¯å‡ºç°äº†xxxæƒé™ä¸å¤Ÿæƒ…å†µæ˜¯éå¸¸æ­£å¸¸çš„ã€‚\néœ€è¦ç»™Flarumæ–‡ä»¶å¤¹èµ‹äºˆè¯»å†™æƒé™ã€‚ è¿›å…¥flarumæ–‡ä»¶å¤¹ä¸‹ï¼Œç»™å®š777æƒé™ã€‚ æ³¨æ„777æ˜¯å±é™©æ“ä½œï¼å¦‚æœåœ¨æœ¬åœ°ä¸è€ƒè™‘å®‰å…¨å› ç´ å¯ä»¥å®Œå…¨èµ‹äºˆ777æƒé™ã€‚ 1 2 3 4 5 cd /Applications/XAMPP/xamppfiles/htdocs/flarum // . çš„æ„æ€æ˜¯è¯¥æ–‡ä»¶å¤¹ä¸‹æ‰€æœ‰çš„æ–‡ä»¶éƒ½æœ‰è¯»å†™æƒé™ sudo chmod -R 777 . // æˆ–è€…æ ¹æ®æç¤ºæ–‡ä»¶å¤¹èµ‹äºˆæƒé™ sudo chmod -R 777 [æ–‡ä»¶å¤¹å/æ–‡ä»¶å] é‡å¯æœåŠ¡å™¨ï¼Œåˆ·æ–°é¡µé¢å°±èƒ½çœ‹åˆ°ä¸€ä¸ªå…¨æ–°çš„flarumç•Œé¢ã€‚å¦‚ä¸Šå›¾ï¼Œæ•°æ®åº“çš„ä¿¡æ¯å°±æ˜¯ä¹‹å‰é…ç½®çš„ï¼ˆå’Œäº‘ç«¯éƒ¨ç½²çš„ä¿¡æ¯æœ€å¥½ä¿æŒä¸€è‡´ï¼‰ 1 2 // é‡å¯æœåŠ¡å™¨ sudo apachectl restart è¾“å…¥å¥½ä¹‹å‰åˆ›å»ºçš„æ•°æ®åº“ç”¨æˆ·åè¿™ç±»çš„å°±æˆåŠŸå•¦ã€‚\nCommon Apache CLI 1 2 3 4 5 6 7 8 // å¯åŠ¨æœåŠ¡å™¨ sudo apachectl start // é‡å¯æœåŠ¡å™¨ sudo apachectl restart // åœæ­¢æœåŠ¡å™¨ sudo apachectl stop ğŸ€ Summary è™½ç„¶åœ¨æœ¬åœ°éƒ¨ç½²çš„æ˜¯ä¸€ä¸ªå…¨æ–°çš„flarumæ¡†æ¶ï¼Œåœ¨å®é™…å¼€å‘è¿‡ç¨‹ä¸­å¤§æ¦‚ç‡æ˜¯ä¸èƒ½æ¬¡æ¬¡é‡æ–°éƒ¨ç½²çš„ï¼Œæ‰€ä»¥ä¸‹ä¸€æ­¥çš„è®¡åˆ’å°±æ˜¯äº‘ç«¯å’Œæœ¬åœ°çš„æ¥å›è¿ç§»ï¼Œæ›´æ–°ã€‚ å¦å¤–ï¼Œè€ƒè™‘å°†æ•°æ®åº“ä¸æœåŠ¡å™¨åˆ†å¼€éƒ¨ç½²ã€‚ä¹Ÿè®¸ä¼šå¢åŠ ä¸€äº›è´¹ç”¨ï¼Œä½†çµæ´»æ€§æ›´é«˜ã€‚\n", 
            "url": "https:\/\/hupochuanbird.github.io\/posts\/depoly-locally-macos-apache2\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/posts\/flarum-deploy-to-cloud\/": {
            "title": "Flarum:éƒ¨ç½²åˆ°äº‘ç«¯(ubuntu 22.04)",
            "tags": ["Tutorial","Cloud","Linux","Ubuntu",],
            "content": " å…³äºå¦‚ä½•éƒ¨ç½²Flarumè¿™ä¸ªè®ºå›æ¡†æ¶æœ‰å¤šç§æ–¹æ³•ï¼Œ1ï¼‰ç›´æ¥linuxå‘½ä»¤ 2ï¼‰Dockeréƒ¨ç½² 3ï¼‰å®å¡”ã€‚ æœ¬æ–‡é€‰ç¬¬ä¸€ç§æ–¹æ³•ï¼Œå› ä¸ºç®€å•ï¼Œçœå†…å­˜ã€‚å¦å¤–ï¼Œå»ºè®®æ‰€æœ‰çš„ç‰ˆæœ¬å·æœ€å¥½éƒ½åšè®°å½•ï¼Œä¾¿äºæœªæ¥è¿ç§»ã€‚æ­¤é…ç½®ä¸åŒ…å«SSL\n1ï¸âƒ£ Deployment preparation ä¸€å°æœåŠ¡å™¨ï¼Œé€‰æ‹©ubuntuç³»ç»Ÿã€‚ åŸŸåï¼ˆå¯é€‰ï¼Œå¦‚æœæ²¡æœ‰åŸŸåå¯ä»¥ç›´æ¥ç”¨ipè®¿é—®ï¼‰ã€‚ 2ï¸âƒ£ Login to the server ä¸è®ºç”¨ä»€ä¹ˆæœåŠ¡å•†ï¼Œç‚¹å‡»è¿æ¥åˆ°æœåŠ¡å™¨ã€‚è¯·ç›´æ¥è¾“å…¥ä¸€ä¸‹å‘½ä»¤ï¼Œå¦‚æœå‡ºç°permission denyé”™è¯¯ï¼Œè¯·ç”¨ sudoå‘½ä»¤ã€‚\nğŸ‘‰ Environment configuration 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 sudo apt update sudo apt upgrade -y sudo apt install wget unzip curl nano git -y sudo apt install apache2 -y sudo systemctl enable --now apache2 sudo a2enmod rewrite sudo systemctl restart apache2 # php ç¯å¢ƒ sudo apt install php php-curl sudo apt install php php-dom sudo apt install php php-gd sudo apt install php php-json sudo apt install php php-mbstring sudo apt install php php-mysql sudo apt install php php-tokenizer sudo apt install php php-zip # æ•°æ®åº“ï¼Œ å½“ç„¶ä¹Ÿå¯ä»¥å®‰è£…mysql sudo apt install mariadb-server -y sudo systemctl enable --now mariadb sudo mysql_secure_installation # ç™»é™†æ•°æ®åº“ï¼Œåˆ›å»ºschemaï¼Œæ•°æ®åº“åflarum_dbï¼Œå¯ä»¥è‡ªå®šä¹‰ sudo mysql # ä»¥ä¸‹ æ˜¯æ•°æ®åº“sql CREATE DATABASE flarum_db; CREATE USER \u0026#39;flarum_user\u0026#39;@\u0026#39;localhost\u0026#39; IDENTIFIED BY \u0026#39;flarum_pass\u0026#39;; GRANT ALL PRIVILEGES ON flarum_db.* TO \u0026#39;flarum_user\u0026#39;@\u0026#39;localhost\u0026#39;; FLUSH PRIVILEGES; exit ä»¥ä¸Šå°±æ˜¯phpä»¥åŠæ•°æ®åº“å¿…è¦ç¯å¢ƒï¼Œæ¥ä¸‹æ¥æ˜¯ä¸‹è½½Composerï¼ŒComposeræ˜¯ä¸€ä¸ªåœ¨PHPä¸­è¿›è¡Œä¾èµ–æ€§ç®¡ç†çš„å·¥å…·ã€‚\nğŸ‘‰ Composer download 1 2 3 4 5 curl -sS https://getcomposer.org/installer -o composer-setup.php sudo php composer-setup.php --install-dir=/usr/local/bin --filename=composer # æŸ¥çœ‹ç‰ˆæœ¬ composer -V ğŸ‘‰ Flarum Framework download é¦–å…ˆåˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œåœ¨ /var/www/html/forum/ è·¯å¾„ä¸‹ 1 2 3 4 5 6 7 8 9 10 sudo mkdir /var/www/html/forum/ # è·³è½¬åˆ°æ­¤è·¯å¾„ä¸‹è¿›è¡Œä¸‹è½½ cd /var/www/html/forum/ sudo composer create-project flarum/flarum . --stability=beta # æ­¤å‘½ä»¤æ˜¯ç»™äºˆReadæƒé™ sudo chown -R www-data:www-data /var/www/html/forum/ sudo chmod -R 755 /var/www/html/forum/ ğŸ‘‰ Apache configuration æ­¤é…ç½®çš„ç›®çš„æ˜¯ä¸ºäº†æŒ‡å®šåŸŸåï¼Œå·²ç»æ¡†æ¶éƒ¨ç½²è·¯å¾„ï¼Œåœ¨Ubuntuç¯å¢ƒä¸‹ï¼Œæ“ä½œæ–‡ä»¶çš„å‘½ä»¤æ˜¯nanoï¼ˆLinuxä¸‹æ˜¯Vimï¼‰\n1 2 # è·³è½¬åˆ°æ­¤è·¯å¾„ä¸‹è¿›è¡Œåˆ›å»º flarum.conf æ–‡ä»¶ sudo nano /etc/apache2/sites-available/flarum.conf å› ä¸ºæ˜¯æ–°çš„æ–‡ä»¶ï¼Œæ‰“å¼€ååˆ‡æ¢ç¼–è¾‘çŠ¶æ€ï¼Œå¤åˆ¶ä»¥ä¸‹å†…å®¹ï¼š ä¸»è¦æ”¹åŠ¨çš„åœ°æ–¹æ˜¯ DocumentRoot å’Œ ServerName\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 \u0026lt;VirtualHost *:80\u0026gt; ServerAdmin admin@example.com DocumentRoot /var/www/html/forum/public ServerName www.youngbird97.top DirectoryIndex index.php \u0026lt;Directory /var/www/html/forum/public/\u0026gt; Options +FollowSymLinks AllowOverride All Order allow,deny allow from all \u0026lt;/Directory\u0026gt; ErrorLog /var/log/apache2/flarum-error_log CustomLog /var/log/apache2/flarum-access_log common \u0026lt;/VirtualHost\u0026gt; ä¿å­˜æ–‡ä»¶å¹¶ä¸”é€€å‡ºã€‚\næ¥ä¸‹æ¥ï¼Œå¯ç”¨Flarumè™šæ‹Ÿä¸»æœºã€‚ 1 sudo a2ensite flarum å¯ç”¨Apacheé‡å†™æ¨¡å—ï¼Œå¹¶ä¸”é‡å¯ApacheæœåŠ¡ã€‚ 1 2 3 4 5 sudo a2enmod rewrite sudo systemctl restart apache2 # æ£€æŸ¥ä¸€ä¸‹apacheæœåŠ¡çŠ¶æ€ systemctl status apache2 åˆ°ç›®å‰ä¸ºæ­¢ï¼Œå¿…è¦é…ç½®å·²ç»å®Œæˆâœ…\nğŸ‘‰ Enabling the Ubuntu Firewall å¯ç”¨ Ubuntu é˜²ç«å¢™ 1 sudo ufw enable æ£€æŸ¥é˜²ç«å¢™çš„çŠ¶æ€ã€‚ç¡®ä¿ä½ å°†ä½¿ç”¨çš„ç«¯å£ï¼ˆSSH - ç«¯å£ 22, HTTP - ç«¯å£ 80ï¼‰æ˜¯å…è®¸çš„ã€‚ 1 sudo ufw status å¦‚æœè¿”å›å†…å®¹åªæœ‰activeï¼Œè¯·è¾“å…¥ä¸€ä¸‹å‘½ä»¤: 1 sudo ufw allow 22,80/tcp 3ï¸âƒ£ Check that all installations are successful è¾“å…¥è‡ªå·±é…ç½®åŸŸåæˆ–è€…ipï¼Œæ­£å¸¸æƒ…å†µä¸‹ä¼šçœ‹åˆ°è¿™ä¸ªé¡µé¢ï¼Œè¾“å…¥ä¹‹å‰é…ç½®çš„æ•°æ®åº“åç§°å’Œå¯†ç ï¼Œ å†åˆ›å»ºä¸€ä¸ªè®ºå›è´¦æˆ·ï¼ˆæ­¤è´¦æˆ·æ˜¯ç®¡ç†å‘˜è´¦æˆ·ï¼‰è¿›è¡Œç™»é™†ã€‚\nå¦‚æœä¸€åˆ‡é¡ºåˆ©ï¼Œä¼šç›´æ¥è¿›å»åˆ°è®ºå›é¦–é¡µã€‚ä¸‹å›¾å®é™…ä¸Šå·²ç»é…ç½®äº†å¾ˆå¤šç»„å»ºï¼Œç‰¹åˆ«æ˜¯é…ç½®äº†ä¸­æ–‡æ’ä»¶ï¼Œæ€»ä¹‹å¤§æ¦‚æ˜¯è¿™ä¸ªæ ·å­ã€‚ å¦‚æœå‡ºç°è®¿é—®ä¸äº†çš„æƒ…å†µï¼Œè¯·æ£€æŸ¥å®‰å…¨ç»„æ˜¯å¦å¼€æ”¾äº†80ç«¯å£\nå‚è€ƒ https://www.vultr.com/docs/how-to-install-flarum-forum-on-ubuntu-20-04/ é…ç½®æ–‡æ¡£ https://extiverse.com/ ç»„ä»¶åº“ https://builtwithflarum.com/ æ¨¡æ¿ æ­¤é…ç½®æ–‡æ¡£ä¹Ÿè®¸ä¼šåœ¨æŸä¸€å¤©å› ç‰ˆæœ¬æ›´æ–°è€Œå¤±æ•ˆï¼Œä»…ä¾›å‚è€ƒï¼ˆ2023ï¼‰ã€‚\n", 
            "url": "https:\/\/hupochuanbird.github.io\/posts\/flarum-deploy-to-cloud\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/tags\/linux\/": {
            "title": "Linux",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/tags\/linux\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/tags\/ubuntu\/": {
            "title": "Ubuntu",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/tags\/ubuntu\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/posts\/flarum-learn\/": {
            "title": "Flarum backup",
            "tags": ["Tutorial",],
            "content": "æ’ä»¶address https://extiverse.com/\nè®°å½•ä¸€ä¸‹å¯èƒ½éœ€è¦ä½¿ç”¨åˆ°çš„æ’ä»¶ https://extiverse.com/extension/acpl/mobile-tab\nhttps://extiverse.com/extension/fof/custom-footer\nhttps://extiverse.com/extension/askvortsov/flarum-categories\nhttps://extiverse.com/extension/fof/stopforumspam\nhttps://extiverse.com/extension/v17development/flarum-blog\nhttps://extiverse.com/extension/blomstra/usercard-stats\nhttps://extiverse.com/extension/justoverclock/custom-html-widget\nhttps://extiverse.com/extension/nearata/flarum-ext-signup-confirm-password\nhttps://extiverse.com/extension/sycho/flarum-advanced-extension-categories https://extiverse.com/extension/swaggymacro/only-starter\nhttps://extiverse.com/extension/datlechin/flarum-scroll-buttons\nhttps://extiverse.com/extension/pattinsonfuture/lang-traditional-chinese\nhttps://extiverse.com/extension/moerio/mixture\nhttps://extiverse.com/extension/askvortsov/flarum-categories\nhttps://extiverse.com/extension/fof/byobu https://extiverse.com/extension/v17development/flarum-user-badges\næµ‹è¯•åœ°å€ http://www.youngbird97.top/\næ•™ç¨‹æ­£åœ¨updatingï¼Œæ­¤ç¯‡ä»…ä¸ºå¤‡å¿˜å½•\n", 
            "url": "https:\/\/hupochuanbird.github.io\/posts\/flarum-learn\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/tags\/format-date\/": {
            "title": "Format Date",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/tags\/format-date\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/posts\/format-dates-in-flutter\/": {
            "title": "Format Dates in Flutter",
            "tags": ["Format Date",],
            "content": "The article from geeksforgeeks\nThe Dart in-built method, for formatting, dates in Flutter according to the requirements is very limited and restrictive. While dealing with dates it should be in human-readable format but unfortunately, thereâ€™s no way of formatting dates in flutter unless you make use of a third-party package.\nIn this article, we will look into one such package known as the intl package.\nintl package Using intl package Add the following dependencies to your pubspec.yaml file, you can find the latest dependencies here.\n1 2 dependencies: intl: ^0.17.0 Add using terminal You can also get the latest intl library using terminal easily:\n1 flutter pub add intl Import it: Thatâ€™s it now import intl package in your Dart code:\n1 import \u0026#39;package:intl/intl.dart\u0026#39;; Still, if you face any error using intl, simply use the following command:\n1 flutter pub get Now letâ€™s take a look at the below example.\nExample In the below code we will not be using the intl package for formatting. Also, take a look at the output of the below code.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 import \u0026#39;package:flutter/material.dart\u0026#39;; void main() { runApp(dateDemo()); } class dateDemo extends StatelessWidget { @override Widget build(BuildContext context) { return MaterialApp( // browser tab title title: \u0026#34;Geeksforgeeks\u0026#34;, // Body home: Scaffold( // AppBar appBar: AppBar( // AppBar color backgroundColor: Colors.green.shade900, // AppBar title title: Text(\u0026#34;Geeksforgeeks\u0026#34;),\t), // Container or Wrapper body: Container(\tmargin: EdgeInsets.fromLTRB(95, 80, 0, 0), // printing text on screen child: Text(\t// Formatted Date // Builtin format / without formatting DateTime.now().toString(),\tstyle: TextStyle( // Styling text fontWeight: FontWeight.bold, fontSize: 30), ), )), ); } } More DateFormat Functions Use Description Example DateFormat.yMMMEd().format(date) Day Name ,Month Name ,Date,Year Fri, Sep 3, 2021 DateFormat.MEd().format(date) Day Name,Month/Date in Numbers Fri , 9/3 DateFormat.MMMMEEEEd().format(date)) DayName,MonthName Date Friday ,September 3 DateFormat.yMMMMEEEEd().format(date)) DayName ,MonthName Date,Year Friday ,September 3,2021 DateFormat.EEEE().format(date) Full DayName only Friday DateFormat.E().format(date) Short DayName Fri DateFormat.M().format(date) Month-Number 9 DateFormat.MMM().format(date) Short MonthName Sep DateFormat.LLLL().format(date) Full MonthName September DateFormat.j().format(date) Current Time only 4 PM ", 
            "url": "https:\/\/hupochuanbird.github.io\/posts\/format-dates-in-flutter\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/tags\/hibernate\/": {
            "title": "Hibernate",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/tags\/hibernate\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/categories\/hibernate\/": {
            "title": "Hibernate",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/categories\/hibernate\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/posts\/hibernate-initapi-slow\/": {
            "title": "Hibernate-FIX: Why request the initial POST\/PUT API takes long time in Hibernate Springboot",
            "tags": ["Hibernate","RESTful",],
            "content": "Discover Our project is Springboot + hibernate, each time I deploy the project to the cloud(not only the cloud, but also in the local dev), the first POST/PUT API need long time to execute.\nWe make several assumptions:\nDNS lookup TCP Handshake and SSL Handshake AWS RDS performance Code problem Assumption Assumption 1 \u0026mdash; DNS lookup In Postman, obviously it\u0026rsquo;s an ideal time. So, move to the next.\nAssumption 2 \u0026mdash;TCP/SSL Handshake Check the speed of handshake. Here is CLI, there is no any exception. So, move to the next.\ncurl -w \u0026#34;TCP handshake: %{time_connect}, SSL handshake: %{time_appconnect}\\n\u0026#34; -so /dev/null https://{your domain} TCP handshake: 0.057688, SSL handshake: 0.100967 Assumption 3 \u0026mdash; AWS RDS How to troubleshoot this problem? I run the server locally and connect to the AWS RDS as a DB source. as long as the server run locally, there is no any delay between RDS and backend, in other words, the problem is not related to RDS. Definitely code leads to potential bugs.\nAssumption 4 This screenshot already told me where is the problem happend there.\nHowever, troubleshooting in the backend is tedious.\nFirstly, Warping the execution code:\n1 2 3 long start = System.currentTimeMillis(); long end = System.currentTimeMillis(); log.error(\u0026#34;Elapsed Time in milli seconds: \u0026#34;+ (end-start)); For example:\nIn controller:\n1 2 3 4 5 6 7 8 9 10 11 @PostMapping(produces = \u0026#34;application/json\u0026#34;) public ResponseEntity\u0026lt;SupplierOrderDTO\u0026gt; createSupplierOrder( @Valid @RequestBody SupplierOrderDTO supplierOrderDTO) { long start = System.currentTimeMillis(); SupplierOrder savedSupplierOrder = supplierOrderService.createOrder( supplierOrderMapper.toEntity(supplierOrderDTO)); long end = System.currentTimeMillis(); log.error(\u0026#34;Elapsed Time in milli seconds: \u0026#34;+ (end-start)); return new ResponseEntity\u0026lt;\u0026gt;(supplierOrderMapper.toDTO(savedSupplierOrder), HttpStatus.CREATED); } In service :\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 public SupplierOrder createOrder(SupplierOrder newSupplierOrder) { long start = System.currentTimeMillis(); SupplierOrder savedSupplierOrder = saveOrder(newSupplierOrder); long end = System.currentTimeMillis(); log.error(\u0026#34;Elapsed Time in milli seconds: \u0026#34;+ (end-start)); return savedSupplierOrder; } private SupplierOrder saveOrder(SupplierOrder supplierOrderToSave) { long start = System.currentTimeMillis(); SupplierOrder supplierOrder = supplierOrderRepository.save(supplierOrderToSave); long end = System.currentTimeMillis(); log.error(\u0026#34;Elapsed Time in milli seconds: \u0026#34;+ (end-start)); return supplierOrder; } Print all the sql statement, we need to change some configuration in yml file:\n1 2 3 4 5 6 7 8 9 10 jpa: database-platform: org.hibernate.dialect.MySQL5InnoDBDialect database: MYSQL show-sql: true #show sql properties: hibernate.id.new_generator_mappings: true hibernate.cache.use_second_level_cache: false hibernate.cache.use_query_cache: false hibernate.format_sql: true #show sql hibernate.generate_statistics: true #show sql Then package the project run in inbuilt tomcat. Run this CLI in terminal under the target folder.\n1 java -jar (warname).war After the program start, head to Postman, run \u0026ldquo;create an order api\u0026rdquo;.\nIt takes 17s!!!!! insert method takes 16s, so let\u0026rsquo;s head to source code.\nIn the save method, before execute the creaete an order(add a new record to DB), the inner method will check the entity is already in the DB or not, so it will query in the DB. In fact, when I execute [persist] method. It faster than before. So I suppose, something happened in isNew function.\nI found a solution finally. Just overwrite the isNew function in each entity class.\nhttps://stackoverflow.com/questions/27573023/how-spring-data-jpa-decides-to-call-entitymanager-persist-or-entitymanager-me\nWhen I depoly to the cloud and execute the create function, it only takes 1s in the initial request!\nI am not sure it is a temporary fix or not\u0026hellip;..\n", 
            "url": "https:\/\/hupochuanbird.github.io\/posts\/hibernate-initapi-slow\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/categories\/java\/": {
            "title": "Java",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/categories\/java\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/categories\/jpa\/": {
            "title": "JPA",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/categories\/jpa\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/tags\/restful\/": {
            "title": "RESTful",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/tags\/restful\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/posts\/customize-search-in-flutter\/": {
            "title": "Customize search bar in Flutter",
            "tags": ["riverpod","state-management",],
            "content": "What\u0026rsquo;s effect we can realise? Custom search bar The search bar can be used in any listview page,when user texts something in different page should list the correct outcome. Customise text input âœ¨ Encapsulate TextFormField TextFormField widget is used to take input from the user in flutter. This is a simple and easy user input widget in flutter.\nWe can perform any operation on that user input data using TextFormField. You can use that user input, can send and show that input. You can store it into a TextEditingController type object.\nIn TextFormField, controller is important to monitor the text user input. focusNode is to monitor user wheater click the text bar.\nIn this search bar, when the text is empty, the suffix icon is \u0026ldquo;search\u0026rdquo;, whereas should be \u0026ldquo;close\u0026rdquo; icon.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 class CustomInputSearch extends ConsumerWidget { final TextEditingController controller = TextEditingController(); final FocusNode? focusNode; CustomInputSearch({key, this.focusNode }); @override Widget build(BuildContext context, WidgetRef ref) { final size = Applayout.getSize(context); final searchNotifier = ref.watch(searchProvider); print(\u0026#34;CustomInputSearch ${controller.text}\u0026#34;); return Container( height: Applayout.getHeight(50), width: Applayout.getHeight(size.width * .8), margin: EdgeInsets.symmetric( horizontal: size.width * 0.1, vertical: Applayout.getHeight(10), ), decoration: BoxDecoration( borderRadius: BorderRadius.circular(Applayout.getHeight(10)), color: Styles.bgColor2, ), child: TextFormField( focusNode: focusNode?? FocusNode(), onChanged: (value){ searchNotifier.setSearchValue(value); }, controller: controller, autofocus: false, decoration: InputDecoration( contentPadding: EdgeInsets.symmetric( horizontal: Applayout.getWidth(20), vertical: Applayout.getHeight(14), ), alignLabelWithHint: true, floatingLabelAlignment: FloatingLabelAlignment.start, suffixIcon: controller.text.trim().isNotEmpty ? IconButton( icon: Icon(Icons.clear_rounded, color: Styles.orangeColor), onPressed: () { controller.clear(); FocusManager.instance.primaryFocus?.unfocus(); searchNotifier.clearSearch(); },) : IconButton( icon: Icon(Icons.search, color: Styles.whiteColor), onPressed: null,), border: InputBorder.none, hintText: \u0026#39;Search ...\u0026#39;, hintStyle: Styles.textStyle, ), ), ); } } ğŸ“ Use it in anywhere It\u0026rsquo;s very simple to use it. beacuse we use riverpod to monitor the textinput, we don\u0026rsquo;t need to pass textcontroller to watch value changes. 1 2 3 4 5 6 7 8 9 10 11 12 final FocusNode _searchFocusNode = FocusNode(); ..... // general use CustomInputSearch( focusNode: _searchFocusNode, ) // using in riverpod. ProviderScope(child: CustomInputSearch( focusNode: _searchFocusNode, ),), ğŸ‘‰ Monitor text changes and filter the target data by using Riverpod Riverpod is a state management library for Flutter developed by the same team behind the Provider library. Riverpod is designed to provide an improved API for managing state in Flutter apps, with a focus on performance, simplicity, and flexibility. Riverpod uses a concept called \u0026ldquo;Scoped Providers\u0026rdquo; to manage state within an app. A Scoped Provider is a function that takes a context and returns an object. The Scoped Provider is responsible for creating and managing the state for that object within the scope of the widget tree.\nImport riverpod plugin Here is riverpod offical website.\n1 2 3 4 5 6 7 8 environment: sdk: \u0026#34;\u0026gt;=2.17.0 \u0026lt;3.0.0\u0026#34; flutter: \u0026#34;\u0026gt;=3.0.0\u0026#34; dependencies: flutter: sdk: flutter flutter_riverpod: ^2.3.6 watch(provider) \u0026amp; read(provider) In Riverpod, watch and read are two ways to access the state of a provider. Here\u0026rsquo;s what they do:\nwatch(provider) Returns a value that will rebuild the widget tree whenever the state of the provider changes. Should be used inside a widget's build method to subscribe to changes in state. Returns a T object that can be accessed using the .state property. For example: watch(counterProvider).state Here's an example of how to use watch to subscribe to changes in a counter: 1 2 3 4 5 6 7 class MyCounterWidget extends StatelessWidget { @override Widget build(BuildContext context) { final counter = context.watch(counterProvider).state; return Text(\u0026#39;Counter: $counter\u0026#39;); } } read(provider): Returns the current value of the provider without subscribing to future changes. Should be used outside of a widget\u0026rsquo;s build method, such as in a button press or event handler. Returns a T object that can be accessed using the .state property. For example: final counter = context.read(counterProvider).state Here\u0026rsquo;s an example of how to use read to get the current value of a counter and update it:\n1 2 3 4 5 6 7 8 9 10 11 12 class MyButtonWidget extends StatelessWidget { @override Widget build(BuildContext context) { return RaisedButton( child: Text(\u0026#39;Increment Counter\u0026#39;), onPressed: () { final counter = context.read(counterProvider); counter.state++; }, ); } } It\u0026rsquo;s important to note that you should use watch inside a widget\u0026rsquo;s build method and read outside of it. Using read inside a build method can lead to unnecessary widget rebuilds and performance issues. Additionally, it\u0026rsquo;s generally recommended to use watch over read whenever possible, as watch provides a more reactive and efficient approach to managing state in Riverpod.\nCreate a SearchNotifier.dart file 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 import \u0026#39;package:flutter/cupertino.dart\u0026#39;; import \u0026#39;package:flutter_riverpod/flutter_riverpod.dart\u0026#39;; class SearchNotifier extends ChangeNotifier { Ref ref; String state = \u0026#34;\u0026#34;; SearchNotifier(this.ref) { state = \u0026#34;\u0026#34;; } void setSearchValue(String value) { state = value; notifyListeners(); } String get searchValue =\u0026gt; state; set searchValue(String value) { setSearchValue(value); notifyListeners(); } void clearSearch() { state = \u0026#34;\u0026#34;; notifyListeners(); } } final searchProvider = ChangeNotifierProvider.autoDispose\u0026lt;SearchNotifier\u0026gt;((ref) { return SearchNotifier(ref); }); In search bar, \u0026ldquo;watch\u0026rdquo; means when the value changed, the lasted value can be catched.\n1 final searchNotifier = ref.watch(searchProvider); Filter data based on text value In the listview page, \u0026ldquo;watch\u0026rdquo; the value in the real time. \u0026ldquo;cartListProvider\u0026rdquo; is another part to access data using RESTful api. We can define a function call \u0026ldquo;filterOrders\u0026rdquo; to filter the data.\n1 2 3 final value = ref.watch(searchProvider).state; filteredData = ref.read(cartListProvider(supplierId)).filterOrders(value); In cartListProvider.dart. 1 2 3 4 5 6 7 List\u0026lt;SupplierProductModel\u0026gt; filterOrders(String _searchString) { String lowerValue = _searchString.toLowerCase(); final filteredData = list.where((item) =\u0026gt; item.productName!.toLowerCase().contains(lowerValue) ).toList(); return filteredData; } Thanks.\n", 
            "url": "https:\/\/hupochuanbird.github.io\/posts\/customize-search-in-flutter\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/tags\/riverpod\/": {
            "title": "riverpod",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/tags\/riverpod\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/categories\/riverpod\/": {
            "title": "riverpod",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/categories\/riverpod\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/tags\/state-management\/": {
            "title": "state-management",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/tags\/state-management\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/tags\/tailand\/": {
            "title": "Tailand",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/tags\/tailand\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/tags\/travle\/": {
            "title": "Travle",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/tags\/travle\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/categories\/travle\/": {
            "title": "Travle",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/categories\/travle\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/videos\/": {
            "title": "Videos",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/videos\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/videos\/thailand2020\/": {
            "title": "æ³°å›½æ—…è¡ŒğŸ‡¹ğŸ‡­2020-æ€€å¿µæ²¡æœ‰ç–«æƒ…çš„æ—¥å­",
            "tags": ["Travle","Tailand",],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/videos\/thailand2020\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/categories\/reading\/": {
            "title": "reading",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/categories\/reading\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/tags\/%E6%9D%B1%E9%87%8E%E5%9C%AD%E5%90%BE\/": {
            "title": "æ±é‡åœ­å¾",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/tags\/%E6%9D%B1%E9%87%8E%E5%9C%AD%E5%90%BE\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/tags\/%E9%80%8F%E6%98%8E%E3%81%AA%E8%9E%BA%E6%97%8B\/": {
            "title": "é€æ˜ãªèºæ—‹",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/tags\/%E9%80%8F%E6%98%8E%E3%81%AA%E8%9E%BA%E6%97%8B\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/posts\/%E9%80%8F%E6%98%8E%E3%81%AA%E8%9E%BA%E6%97%8B\/": {
            "title": "é€æ˜ãªèºæ—‹ é˜…è¯»æ„Ÿå—",
            "tags": ["é€æ˜ãªèºæ—‹","æ±é‡åœ­å¾",],
            "content": "Intro æ˜¨å¤©åœ¨ç½‘ä¸Šç¿»é˜…æ­¤ä¹¦ï¼Œè¿™æ˜¯ä¸œé‡åœ­å¾2021çš„ä½œå“ï¼Œç®—å¾—ä¸Šæ¯”è¾ƒæ–°ï¼Œè€Œä¸”é˜…è¯»ååˆ†é¡ºç•…ï¼Œä¸€å£æ°”è¯»å®Œï¼Œä¸€å¦‚æ—¢å¾€çš„è´´åˆå®é™…ç”Ÿæ´»ã€‚è‡ªã€Šå«Œç–‘äººXçš„çŒ®èº«ã€‹åï¼Œæ±¤å·æ•™æˆå†ä¸€æ¬¡å‡ºç°åœ¨æˆ‘çš„è®°å¿†é‡Œã€‚æ•…äº‹èƒŒæ™¯ä¸»è¦è®¾å®šåœ¨ç°ä»£æ—¥æœ¬çš„éƒ½å¸‚ç¯å¢ƒä¸­ï¼Œè¿˜ç»“åˆäº†ç–«æƒ…å£ç½©çš„æƒ…èŠ‚ï¼ˆä½†ä¸å¤šï¼‰ã€‚\nã€Œå›­é¦™çš„ç”·å‹æ­»äº†ï¼Œå°±åœ¨å¥¹æŠ¥è­¦ç§°ä»–å¤±è¸ªçš„ä¸€å‘¨åã€‚ä»–æ›¾æ˜¯å¥¹æ¸©æš–çš„å ¡å’ï¼Œå¦‚ä»Šå´æˆäº†æµ·ä¸Šå†°å†·çš„æµ®å°¸ã€‚æ˜¯è°‹æ®ºã€‚ æ¡ˆå‘æ—¶ï¼Œå›­é¦™æ­£ä¸å‹äººåœ¨é¥è¿œçš„äº¬éƒ½æ—…è¡Œã€‚å¥¹æœ‰å®Œç¾çš„ä¸åœ¨åœºè¯æ˜ï¼Œæ²¡æœ‰ä½œæ¡ˆåŠ¨æœºï¼Œå´åœ¨æŠ¥è­¦åé€‰æ‹©äº†é€ƒäº¡ã€‚ ä¸æ­¤åŒæ—¶ï¼Œå¦ä¸€ä¸ªå«Œç–‘äººå‡ºç°åœ¨è­¦æ–¹è§†é‡ä¸­ã€‚é‚£äººçš„è½®å»“ä¸€ç‚¹ç‚¹å˜å¾—æ¸…æ™°ï¼ŒçœŸç›¸ä»¿ä½›å‘¼ä¹‹æ¬²å‡ºã€‚ã€\næœ€è¿‘å‡ å¹´ï¼Œä¼¼ä¹å¥³æ€§é¢˜æå˜å¾—æ›´å—æ¬¢è¿ï¼Œä¹Ÿè®¸æ˜¯æ›´èµšé’±äº†å§ï¼Œç”·ä½œå®¶å¯¹å®¶æš´çš„æè¿°å¤ªå†™å®äº†ï¼Œå³ä¾¿æ˜¯è¢«æ‰“å¾—éä½“å‡Œä¼¤ï¼Œå¥³äººæ°¸è¿œæ˜¯åŸè°…ï¼Œ\n", 
            "url": "https:\/\/hupochuanbird.github.io\/posts\/%E9%80%8F%E6%98%8E%E3%81%AA%E8%9E%BA%E6%97%8B\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/posts\/how-to-use-this-theme-in-your-project\/": {
            "title": "How to Use This Theme in Your Project",
            "tags": ["installation",],
            "content": "Downlaod vscode Navigate to VsCode website, just download in your pc.\nInstall Hugo environment In hugo offical website, there are four options to install hugo env which depends on your operation system(OS).\nInstall Git Install Go version 1.18 or later Update your PATH environment variable as described in the Go documentation Hugo CLI Create a new site 1 2 3 4 hugo new site mywebsiteName # naviagate to the new folder, open in VScode cd mywebsiteName Download theme and import to themes folder You can clone theme project or download zip directly.\nAfter move the \u0026ldquo;dark-theme\u0026rdquo; to themes folder, don\u0026rsquo;t forget setting in config.toml 1 theme=\u0026#34;theme\u0026#39;s name\u0026#34; Run project 1 hugo server -D If the project runs successfully, you will see these info below:\nhttp://localhost:1313/ is your loacal running port.\nCreate a post If you want to write a blog, the command line is: 1 hugo new posts/xxxxx.md Then, you can notice hugo help you create a blog in posts folder.\nCompile and Upload to the cloud If it\u0026rsquo;s your first time to commit your changes. 1 2 3 4 5 6 7 8 9 hugo cd public git init git add ./ git commit -m \u0026#34;inital commit\u0026#34; git checkout -b master git branch -M master git remote add origin https://xxxx.git git push - u origin master otherwise, you just commit and push again\n1 2 3 4 5 6 hugo cd public git add ./ git commit -m \u0026#34;xx update\u0026#34; git checkout master git push - Here is tutorial about how to deploy to the github\n", 
            "url": "https:\/\/hupochuanbird.github.io\/posts\/how-to-use-this-theme-in-your-project\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/tags\/installation\/": {
            "title": "installation",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/tags\/installation\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/tags\/github\/": {
            "title": "github",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/tags\/github\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/categories\/github\/": {
            "title": "github",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/categories\/github\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/posts\/how-to-deploy-to-github\/": {
            "title": "How to Deploy to Github",
            "tags": ["github","cloud",],
            "content": "How to Deploy to Github To deploy your Hugo site to GitHub Pages, you can follow these steps:\nFirst update baseURL in config.yaml baseURL: https://www.username.github.io Then compile with hugo 1 hugo Go to public folder 1 cd piblic Second, create a new repository on GitHub that will hold your website files. Make sure to name the repository in the format yourusername.github.io, where yourusername is your GitHub username. Don\u0026rsquo;t forget add github.io create a new repo for your personal website Setting: GitHub Pages site to master branch Next, navigate to the root of your Hugo project directory in a terminal window or command prompt. (we already in public folder) Initialize a new Git repository by running the command: 1 git init Add all the files in your Hugo project directory to the new Git repository by running the command: 1 git add ./ Commit the changes to the Git repository by running the command: 1 git commit -m \u0026#34;Initial commit\u0026#34; Set the remote repository to your new GitHub Pages repository by running the command: 1 2 git remote add origin https://github.com/yourusername/yourusername.github.io.git Replace \u0026lsquo;yourusername\u0026rsquo; with your actual GitHub username.\nHere we need to notice, if the default branch is not the master, please use this command first: 1 git checkout -b master Finally, push the changes to the remote repository by running the command: 1 git push -u origin master This will push the changes in your local Git repository to the remote repository on GitHub. You should now see your website files in the GitHub repository.\nTo make your website live, go to your repository settings on GitHub and scroll down to the GitHub Pages section. Select the master branch as your source and click on Save. Your website should now be accessible at https://yourusername.github.io. Note that it may take a few minutes for GitHub Pages to update and display your website after you have deployed it.\nThe full command 1 2 3 4 5 6 7 8 9 10 11 git init git checkout -b master git add ./ git commit -m \u0026#34;Initial commit\u0026#34; git branch -M master git remote add origin https://github.com/yourusername/yourusername.github.io.git git push -u origin master Visit your site Update your website When you change some files or write a new blog, you need push your change to github, the command is: 1 2 3 git add ./ git commit -m \u0026#34;commentxxxx\u0026#34; git push Problem you might meet yourname.github.io is 404 If you\u0026rsquo;re experiencing a 404 error after deploying your Hugo site to GitHub Pages, there are a few things you can try:\nCheck the spelling and capitalization of your repository name. Make sure it matches the URL you\u0026rsquo;re using to access your site. For example, if your repository is named my-hugo-site, your site should be accessible at https://yourusername.github.io/my-hugo-site/.\nVerify that you have set the correct repository source in your GitHub Pages settings. If you have multiple branches in your repository, make sure you\u0026rsquo;ve selected the correct one as the source for your GitHub Pages site. You can check this in your repository settings under the \u0026ldquo;GitHub Pages\u0026rdquo; section.\nCheck that you\u0026rsquo;ve pushed your Hugo site\u0026rsquo;s content to the correct branch. By default, GitHub Pages serves content from the gh-pages branch, so make sure you\u0026rsquo;ve pushed your site\u0026rsquo;s files to that branch. Alternatively, you can configure GitHub Pages to use a different branch or directory by changing the settings in your repository.\nVerify that your site\u0026rsquo;s content has been built correctly by running the hugo command locally and checking the generated files in the public/ directory. If the files are missing or incomplete, you may need to troubleshoot your Hugo configuration.\nIf you\u0026rsquo;re using a custom domain, make sure it\u0026rsquo;s set up correctly and that your DNS settings are configured properly. This can sometimes cause issues with GitHub Pages sites.\nWait a few minutes and try accessing your site again. It can sometimes take a few minutes for changes to propagate through GitHub Pages.\nIf none of these solutions work, you may need to consult the Hugo documentation or reach out to the GitHub support team for further assistance.\n", 
            "url": "https:\/\/hupochuanbird.github.io\/posts\/how-to-deploy-to-github\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/tags\/busuanzi\/": {
            "title": "busuanzi",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/tags\/busuanzi\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/posts\/how-to-calculate-the-number-of-views\/": {
            "title": "How to Calculate the Number of Views",
            "tags": ["busuanzi","plugin",],
            "content": "How to Calculate the Number of Views Busuanzi is a third-party visitor counter and statistics tool that you can use with Hugo to track visitor traffic to your site. Here\u0026rsquo;s how to set up Busuanzi in Hugo:\nFirst, go to the Busuanzi website (https://busuanzi.ibruce.info/) and choose the style of the visitor counter you want to use. You can choose from several different styles and customize the text that appears alongside the counter.\nOnce you\u0026rsquo;ve selected your counter style, copy the HTML code provided by Busuanzi. This code should look something like this:\n1 2 \u0026lt;span id=\u0026#34;busuanzi_container_site_pv\u0026#34;\u0026gt; Views \u0026lt;span id=\u0026#34;busuanzi_value_site_pv\u0026#34;\u0026gt;\u0026lt;/span\u0026gt;times\u0026lt;/span\u0026gt; In your Hugo project, open the layout file where you want to add the Busuanzi counter. For example, if you want to add the counter to your site\u0026rsquo;s footer, you might open the footer.html layout file.\nPaste the Busuanzi HTML code into the layout file where you want the counter to appear. Be sure to replace any existing code in that location, or add it to a new location if you\u0026rsquo;re creating a new element.\nSave the layout file and rebuild your Hugo site. The Busuanzi counter should now appear on your site.\nNote that Busuanzi is a third-party tool and may have limitations or restrictions on usage depending on your site\u0026rsquo;s traffic volume. Be sure to read the Busuanzi documentation carefully and follow any usage guidelines or restrictions to avoid any issues with your site\u0026rsquo;s performance or reliability.\nAdd busuanzi in Config.toml 1 2 3 4 5 [params.busuanzi_count] enable = true site_uv = true site_pv = true page_pv = true Where to use it? In footer.html Go the the footer.html, we add the default html in our custom footer.\n1 2 3 4 5 6 7 8 9 \u0026lt;span id=\u0026#34;busuanzi_container_site_uv\u0026#34; class=\u0026#34;busuanzi_container_site_uv\u0026#34;\u0026gt; \u0026lt;i class=\u0026#34;fa-solid fa-chart-simple\u0026#34;\u0026gt;\u0026lt;/i\u0026gt; TotalView\u0026amp;nbsp; \u0026lt;span id=\u0026#34;busuanzi_value_site_uv\u0026#34; class=\u0026#34;busuanzi_value_site_uv\u0026#34;\u0026gt;\u0026lt;/span\u0026gt; \u0026lt;/span\u0026gt;| \u0026lt;span id=\u0026#34;busuanzi_container_site_pv\u0026#34; class=\u0026#34;busuanzi_container_site_pv\u0026#34;\u0026gt; \u0026lt;i class=\u0026#34;fa-solid fa-eye\u0026#34;\u0026gt;\u0026lt;/i\u0026gt;Visitor\u0026amp;nbsp; \u0026lt;span id=\u0026#34;busuanzi_value_site_pv\u0026#34; class=\u0026#34;busuanzi_value_site_pv\u0026#34;\u0026gt;\u0026lt;/span\u0026gt; \u0026lt;/span\u0026gt; Note id and class you cannot define by yourself, but you can change the icon.\nImplement pulgin successfully In post page (post_meta.html) In blog page, we need to know how many users view our article. Go the post_meta.html, Just add only one line.\n1 \u0026lt;span id=\u0026#34;busuanzi_value_page_pv\u0026#34;\u0026gt; \u0026lt;/span\u0026gt; ", 
            "url": "https:\/\/hupochuanbird.github.io\/posts\/how-to-calculate-the-number-of-views\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/tags\/plugin\/": {
            "title": "plugin",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/tags\/plugin\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/posts\/how-to-write-a-blog\/": {
            "title": "How to Write a Blog in Hugo",
            "tags": ["write a blog",],
            "content": "How to Write a Blog in Hugo In hugo, the blogs/articles/posts all store in the content/posts/ folder.\nPath of Posts folder 1 2 3 4 hugo new posts/xxxmd # such as I create this post hugo new posts/How-to-write-a-blog.md # don\u0026#39;t use space in filename!!! \u0026ldquo;posts\u0026rdquo; means, create a md file under the posts folder(is also default blog folder)\nStructure of Post page Structure of Post/blog page This page is like a jigsaw puzzle with several chapters combined, this is done so that the code can call on different structures on other pages, reducing code repetition.\nCount how many words in your blog This is built-in function countwords.\n1 2 # allow md file shows HTML format \u0026lt;i class=\u0026#34;fa fa-book\u0026#34;\u0026gt;\u0026lt;/i\u0026gt;\u0026amp;nbsp;\u0026lt;span\u0026gt;{{ .Content | countwords }} Words\u0026lt;/span\u0026gt; What\u0026rsquo;s the markdowm(MD) file? In Hugo, Markdown (often abbreviated as MD) is a lightweight markup language used to create content for web pages. It allows you to write content using plain text and simple syntax that can be easily converted to HTML by Hugo. Markdown is a popular format for creating web content because it is easy to learn and write, and can be easily converted to HTML without the need for complex formatting tools. In Hugo, you can create Markdown files to define the content of your website. Each Markdown file typically represents a single page or blog post on your site, and contains the content of that page in Markdown format. For example, if you wanted to create a blog post about a topic, you would create a Markdown file with the post\u0026rsquo;s content in it. Markdown files in Hugo typically have a .md extension and are stored in the content directory of your Hugo project. When Hugo builds your website, it processes each Markdown file and converts it to HTML, which can then be served to visitors of your site. Markdown files in Hugo can include additional metadata in the form of front matter, which is written in YAML, TOML or JSON format and placed at the beginning of the Markdown file. This metadata can be used to provide additional information about the content, such as the page\u0026rsquo;s title, author, and publication date. Using HTML tags in MD file In hugo, you also can write HTML in MD file. Yeah, super convenient, right? As I mentioned in my first post, to display HTML tags in the md file requires configuration in the configuration file(config.toml). 1 2 3 4 5 6 7 # allow md file shows HTML format [markup] [markup.goldmark] [markup.goldmark.renderer] unsafe= true hardWraps = false xhtml = false In hugo offical website, you also can find this configuration.\nOutput format of post 1 2 3 4 5 6 7 8 [permalinks] post = \u0026#34;/:year/:month/:title/\u0026#34; [frontmatter] date = [\u0026#34;date\u0026#34;, \u0026#34;publishDate\u0026#34;, \u0026#34;lastmod\u0026#34;] lastmod = [\u0026#34;lastmod\u0026#34;, \u0026#34;:git\u0026#34;, \u0026#34;date\u0026#34;, \u0026#34;publishDate\u0026#34;] publishDate = [\u0026#34;publishDate\u0026#34;, \u0026#34;date\u0026#34;] expiryDate = [\u0026#34;expiryDate\u0026#34;] Permalinks In your site configuration, set a URL pattern for regular pages within a top-level section. This is recursive, affecting descendant regular pages. The permalinks defined in your site configuration do not apply to section pages. To adjust the URL for section pages, set url in front matter.\nHugo offical doc More Information you can visit to hugo offical website\nMarkdowm file editor recommended Typora is a great md editor, you can write or organise blog using general format like microsoft word. After you finish the article, just copy paste to the md file.\n(Note: free version you can ask for the author)", 
            "url": "https:\/\/hupochuanbird.github.io\/posts\/how-to-write-a-blog\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/tags\/write-a-blog\/": {
            "title": "write a blog",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/tags\/write-a-blog\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/posts\/add-icon-menu\/": {
            "title": "Add Icon\/Active class In Menu",
            "tags": ["hugo","menu",],
            "content": "How to custom Icon in menu In the [Hugo introduction] blog, I have shown how the menu is added in hugo. Following the previous article on how to customize social media, did you think that to display the menu you would need to add an icon property? ğŸ˜‚ğŸ˜‚ğŸ˜‚ Head to config.toml file, 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 # setup menu sectionPagesMenu = \u0026#34;main\u0026#34; [menu] [[menu.main]] name = \u0026#34;Home\u0026#34; pre = \u0026#39;\u0026lt;i class=\u0026#34;fa-solid fa-house\u0026#34;\u0026gt;\u0026lt;/i\u0026gt;\u0026#39; url = \u0026#34;/\u0026#34; weight = 1 [[menu.main]] name = \u0026#34;My Blog\u0026#34; pre = \u0026#39;\u0026lt;i class=\u0026#34;fa-solid fa-paper-plane\u0026#34;\u0026gt;\u0026lt;/i\u0026gt;\u0026#39; url = \u0026#34;/posts/\u0026#34; identifier = \u0026#34;posts\u0026#34; weight = 2 [[menu.main]] name = \u0026#34;Tags\u0026#34; pre = \u0026#39;\u0026lt;i class=\u0026#34;fa-solid fa-tag\u0026#34;\u0026gt;\u0026lt;/i\u0026gt;\u0026#39; identifier = \u0026#34;tags\u0026#34; url = \u0026#34;/tags/\u0026#34; weight = 3 [[menu.main]] name = \u0026#34;Abouts\u0026#34; pre = \u0026#39;\u0026lt;i class=\u0026#34;fa-sharp fa-solid fa-medal\u0026#34;\u0026gt;\u0026lt;/i\u0026gt;\u0026#39; identifier = \u0026#34;about\u0026#34; url = \u0026#34;/about/\u0026#34; weight = 4 We add icon in \u0026ldquo;pre\u0026rdquo;. The icon library I use is the common fontawesome. In the menu.html, just using hugo syntax {{.Pre}} to display icon. 1 2 3 4 5 6 7 8 {{ range .Site.Menus.main }} \u0026lt;a href=\u0026#34;{{ .URL }}\u0026#34; title=\u0026#34;{{ .Name }}\u0026#34;\u0026gt; \u0026lt;li class=\u0026#34;hover\u0026#34;\u0026gt; {{ .Pre }} {{ .Name }} \u0026lt;/li\u0026gt; \u0026lt;/a\u0026gt; {{ end }} How to add active class in menu This is an additional attribute that highlights a menu when it is clicked on.\nWe need to use the built-in syntax, such as \u0026ldquo;eq\u0026rdquo; \u0026ldquo;delimit\u0026rdquo; \u0026ldquo;split\u0026rdquo;. More infomation 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 {{ $currentPage := . }} {{ range .Site.Menus.main }} {{ $menu_item_url := .URL | relLangURL }} {{ $page_url:= $currentPage.RelPermalink | relLangURL }} {{ $segments1 := delimit (split $menu_item_url \u0026#34;/\u0026#34;) \u0026#34;/\u0026#34; }} {{ $segments2 := delimit (split $page_url \u0026#34;//\u0026#34;) \u0026#34;/\u0026#34; }} {{ $section1 := first 6 $segments1 }} {{ $section2 := first 6 $segments2 }} \u0026lt;!-- {{ printf \u0026#34;segments1 = %s \u0026#34; $section1 }} {{ printf \u0026#34;segments2 = %s \u0026#34; $section2 }} --\u0026gt; \u0026lt;a href=\u0026#34;{{ $menu_item_url }}\u0026#34; title=\u0026#34;{{ .Name }}\u0026#34;\u0026gt; \u0026lt;li class=\u0026#34;hover {{if eq $section2 $section1 }} active {{end}}\u0026#34;\u0026gt; {{ .Pre }} {{ .Name }} \u0026lt;/li\u0026gt; \u0026lt;/a\u0026gt; {{ end }} In tailwind.css, I add a new class name active. You can overwrite your active attributes, such as color, box-shadow, size and so on. 1 2 3 4 #menu .active { color: #ffb703; font-size: 1.15rem; } ", 
            "url": "https:\/\/hupochuanbird.github.io\/posts\/add-icon-menu\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/tags\/menu\/": {
            "title": "menu",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/tags\/menu\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/posts\/add-social-media\/": {
            "title": "Add Social Media in hugo",
            "tags": ["custom","hugo",],
            "content": "Add your social media in config.toml You can add social media in HTML directly, also, can use config file which is easy to change every time you want to update.\n1 2 3 4 5 6 7 8 9 10 11 12 13 [params] [[params.social]] url = \u0026#34;https://twitter.com/\u0026#34; icon = \u0026#34;fa-brands fa-twitter fa-lg\u0026#34; [[params.social]] url = \u0026#34;https://facebook.com/\u0026#34; icon = \u0026#34;fa-brands fa-facebook fa-lg\u0026#34; [[params.social]] url = \u0026#34;https://linkedin.com/\u0026#34; icon = \u0026#34;fa-brands fa-linkedin fa-lg\u0026#34; [[params.social]] url = \u0026#34;https://linkedin.com/\u0026#34; icon = \u0026#34;fa-brands fa-instagram fa-lg\u0026#34; Using in HTML page Because header and footer both show social media, we just write a singe HTML, them import to some places you want to display. 1 2 3 4 5 6 7 {{ with $.Site.Params.social }} {{ range . }} \u0026lt;a href=\u0026#34;{{ .url }}\u0026#34;\u0026gt; \u0026lt;i class=\u0026#34;{{ .icon}}\u0026#34;\u0026gt;\u0026lt;/i\u0026gt; \u0026lt;/a\u0026gt; {{ end }} {{ end }} Import to somewhere How to import social-media template to header In hugo, if you want to use global var, the synatx is $.Site.xxx. In this case is [$.Site.Params.social ]; Range is the loop function. Icon Source In this project, I choose fontawesome as the icon source. You also can determine which icon library you want to use. Popular choices include Font Awesome, Material Icons, and Bootstrap Icons. You can either download the icon library and include it in your Hugo project or use a CDN link.\n", 
            "url": "https:\/\/hupochuanbird.github.io\/posts\/add-social-media\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/tags\/custom\/": {
            "title": "custom",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/tags\/custom\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/tags\/taxonomy\/": {
            "title": "taxonomy",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/tags\/taxonomy\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/posts\/whats-the-taxonomy\/": {
            "title": "Taxonomy",
            "tags": ["taxonomy",],
            "content": "ğŸ‘€ What\u0026rsquo;s the Taxonomy? In Hugo, a taxonomy is a way of organizing your content based on specific attributes or categories. Taxonomies are used to create grouping mechanisms for your content, allowing you to easily organize, sort, and filter your pages based on common characteristics.\nHugo supports several types of taxonomies, including:\nTags: A list of keywords or phrases that describe the content of a page. Tags are typically used to group related content together, regardless of the page\u0026rsquo;s location or content type.\nCategories: A hierarchical grouping of pages based on their subject matter. Categories are typically used to group pages within a specific content type, such as blog posts or documentation pages.\nSeries: A grouping of related pages that are part of a larger series or sequence. Series are typically used to organize content that is meant to be read in a specific order, such as chapters of a book or episodes of a podcast.\nTo create a taxonomy in Hugo, you need to define it in your site\u0026rsquo;s configuration file and specify the content types that it applies to. You can then add taxonomy terms to your content files using front matter or other methods, allowing you to categorize and organize your content according to your desired taxonomy.\n1 2 3 4 [taxonomies] tag = \u0026#34;tags\u0026#34; category = \u0026#34;categories\u0026#34; archive = \u0026#34;archives\u0026#34; Once you have created a taxonomy and assigned terms to your content, you can use Hugo\u0026rsquo;s built-in functions to generate taxonomy pages that display all the pages associated with a particular term. You can also use taxonomies to create navigation menus, filtering options, or other dynamic features that make it easier for users to explore and discover your content.\nAdd tags and categories in posts template Head to archetypes/posts.md, in Hugo, archetypes are pre-defined templates for new content files. They are used to create new content files with a specific structure and pre-populated metadata, such as the title, date, and author.\nArchetypes are useful for maintaining consistency in the structure and metadata of your content files, and for saving time when creating new content. When you create a new content file using an archetype, the file will already have the necessary metadata and structure, so you can focus on writing the content itself.\nHere I define some parameters in posts template, we mainly foucs on tags and categories, hugo can help us to category by categories and tags. The name (tags and categories) must match the params defined in config.toml.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 title: \u0026#34;{{ replace .Name \u0026#34;-\u0026#34; \u0026#34; \u0026#34; | title }}\u0026#34; date: {{ .Date }} lastmod: {{ .Date }} subTitle: \u0026#34;subTitle\u0026#34; description: \u0026#34;this is description\u0026#34; draft: false type: posts label: \u0026#34;orginal\u0026#34; author: {{ .Site.Params.author}} tags: [tag1, tag2, tag3] categories: [cate1,cate2] cover: position: \u0026lt;left,right\u0026gt; image: \u0026#34;\u0026#34; alt: \u0026#34;\u0026lt;alt text\u0026gt;\u0026#34; caption: \u0026#34;\u0026lt;text\u0026gt;\u0026#34; Additionally, If the draft is false, the post will not display in the list page.\nWhere to display all my blogs/posts/articles? list.html is a template file used in Hugo, which is a popular static site generator. In Hugo, a list page refers to a page that displays a list of content items from a specific section or taxonomy.\nThe list.html template is used to render these list pages in Hugo. It typically includes elements such as a header, footer, and navigation menu, as well as a loop that iterates through the list of content items and displays them in a specific format.\nThe exact content and structure of the list.html template will depend on the specific requirements of your website or project. However, in general, it should provide a clear and organized way for visitors to navigate and browse through the content on your site.\nlist.html(to display all the posts) Go to the layouts folder, we create a posts folder and list.html( In fact the list template is also created automatically by hugo, I just move to posts folder make it easier to understand ), hugo can directly find the HTML file name list.html. my project How to display all the posts, you can overwrite css or change the layout. Define how many posts shows in a page In config.toml, we add this configuration below: 1 2 3 # Pagination paginate = 10 paginatePath = \u0026#34;page\u0026#34; List all the post by time In hugo, the synatx of Iterates is {range (xxxx) end}\n1 2 3 4 5 6 7 8 9 10 11 {{ range (.Paginate (.Pages.GroupByDate \u0026#34;2006-01\u0026#34;)).PageGroups }} \u0026lt;div class=\u0026#34;result\u0026#34; role=\u0026#34;group\u0026#34;\u0026gt; {{ $month := printf \u0026#34;%s%s\u0026#34; .Key \u0026#34;-01\u0026#34;}} \u0026lt;h2 class=\u0026#34;result__title\u0026#34;\u0026gt;{{ $month | time.Format \u0026#34;January 2006\u0026#34; }}\u0026lt;/h2\u0026gt; {{ range .Pages }} {{ partial \u0026#34;archiveItem.html\u0026#34; (dict \u0026#34;context\u0026#34; .) }} {{ end }} \u0026lt;/div\u0026gt; {{ end }} archiveItem.html is another template, you also write your post list in the same HTML.\nWhere to display my blogs/posts/articles according to a tag or category? After we add [taxonomies] to config.toml, Hugo will help us to category, still use list.html to display some specific posts.\nlist.html list.html ", 
            "url": "https:\/\/hupochuanbird.github.io\/posts\/whats-the-taxonomy\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/tags\/aboutme\/": {
            "title": "aboutme",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/tags\/aboutme\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/posts\/create-a-custom-page\/": {
            "title": "Create a custom page",
            "tags": ["hugo","custom","aboutme",],
            "content": "Create a custom page: about me About page is not the default page, easily we can consider about.html is a other type of posts, so we need to create a post: the command-line interface (CLI) is: 1 hugo new posts/\u0026lt;post-name\u0026gt;.md in this case, we need to type: 1 2 3 hugo new about/_index.md # create a new folder named about, we separate posts folder(default blog folder) and custom folder you might ask why is md file not HTML? In fact, md(markdown) file can store the metadata of your article, about page is a special type of blog. when the application runs, the program will search _index file at first.\nPage structure Page structure We can notice, there are some metadatas I have defined in archetype, [title,date, type,layout\u0026hellip;], we need to create a about.html for the about page.\nCreate about.html Head to layout/ folder, create a html file name about, paste the html content to your about page. 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 {{- define \u0026#34;main\u0026#34; }} \u0026lt;section class=\u0026#34;s:mt-10\u0026#34;\u0026gt; \u0026lt;div class=\u0026#34;container\u0026#34;\u0026gt; \u0026lt;div class=\u0026#34;flex flex-col sm:flex-row gap-8 sm:my-14\u0026#34;\u0026gt; \u0026lt;!-- Photo --\u0026gt; \u0026lt;div class=\u0026#34;sm:w-2/5 sm:mt-10\u0026#34;\u0026gt; \u0026lt;img src=\u0026#34;{{ $.Site.Params.aboutImage }}\u0026#34;\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;w-full sm:w-3/5 sm:mt-10\u0026#34;\u0026gt; \u0026lt;!-- Content --\u0026gt; {{ .Content }} \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/section\u0026gt; {{- end }} \u0026lt;!-- .Content is the hugo syntax, load the content you write in md file --\u0026gt; The fix HTML structure is, you can use it in any html file. 1 2 3 4 5 6 7 8 {{- define \u0026#34;main\u0026#34; }} \u0026lt;section class=\u0026#34;s:mt-10\u0026#34;\u0026gt; \u0026lt;div class=\u0026#34;container\u0026#34;\u0026gt; \u0026lt;div class=\u0026#34;flex flex-col sm:flex-row gap-8 sm:my-14\u0026#34;\u0026gt; \u0026lt;!-- add you html content or md content --\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/section\u0026gt; {{- end }} â€™define \u0026ldquo;main\u0026rdquo;â€˜ you can consider it as a tag which will render in the index page automatically 1 {{- define \u0026#34;main\u0026#34; }}xxxx{{- end }} about page using HTML and md file\nUsing HTML tag in md file In hugo, it provides more flexible way to custom your own HTML page, you can write HTML code in pure HTML file, or you can use HTML tag in MD file. You need add this configuration in config.toml. 1 2 3 4 5 6 7 # allow md file shows HTML format [markup] [markup.goldmark] [markup.goldmark.renderer] unsafe= true hardWraps = false xhtml = false about page using HTML\n", 
            "url": "https:\/\/hupochuanbird.github.io\/posts\/create-a-custom-page\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/about\/": {
            "title": "About me",
            "tags": [],
            "content": "Hello, I\u0026rsquo;m xxx kdm I come from Poland, and I'm a UI designer with some coding skills. I'm also interested in UX, as I believe that every product should be usable, accessible, profitable, and let users perform core tasks without any friction. I keep designing every day to polish my skills. Besides designing and coding, I love learning foreign languages. I graduated in 2021 in English Studies at the University of Opole, and now I'm learning German and Czech. ", 
            "url": "https:\/\/hupochuanbird.github.io\/about\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/tags\/": {
            "title": "Tags",
            "tags": [],
            "content": "Hello, I\u0026rsquo;m TAG ", 
            "url": "https:\/\/hupochuanbird.github.io\/tags\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/tags\/entry\/": {
            "title": "entry",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/tags\/entry\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/posts\/hugo-introduction\/": {
            "title": "Hugo introduction",
            "tags": ["entry","introduction",],
            "content": "Hugo Introduction Basic Description Hugo is a popular open-source static site generator that allows you to create fast and efficient websites without relying on a database or server-side scripting. The structure of a Hugo site includes the following elements:\nContent folder: This folder contains all the content of your website, including pages, blog posts, images, and other media. The content is typically written in Markdown, which is a lightweight markup language. Static folder: This folder contains all the static assets of your website, including CSS stylesheets, JavaScript files, images, and other media files. These assets are not generated dynamically and are instead served as-is. Archetypes folder: This folder contains templates for creating new content files. You can create templates for different types of content, such as blog posts or pages, to make it easy to create new content quickly. Themes folder: This folder contains all the templates, stylesheets, and other assets for your website\u0026rsquo;s theme. You can choose from a variety of pre-built themes or create your own. Config file: This file contains configuration settings for your Hugo site, such as the site title, language, and other global settings. Layouts folder: This folder contains templates for generating the HTML output of your website. You can create templates for different types of pages, such as the homepage, blog index, or individual blog posts. Data folder: This folder contains data files that are used to generate your website, such as site configuration settings, lists of authors or categories, or other metadata. Project structure In this case, we need to introduce our theme in theme folder, in terms of structure of theme, logically it the same as the default one.\nIt\u0026rsquo;s worth to notice that Config file [config.toml] we define a lot of global variables, I will reveal in the next section, including how to introduce custom theme.\nHugo Theme Hugo themes are collections of templates, stylesheets, and other assets that determine the appearance and behavior of a Hugo website. The structure of a Hugo theme typically includes the following elements:\nLayouts folder: This folder contains the templates that generate the HTML output of your website. It is organized by the content type (e.g., posts, pages) and can include a variety of template files, such as base templates, list templates, and single templates. Static folder: This folder contains all the static assets of the theme, including CSS stylesheets, JavaScript files, images, and other media files. These assets are not generated dynamically and are instead served as-is. Assets folder: This folder contains the source files for the theme\u0026rsquo;s stylesheets and scripts, as well as any other assets that need to be compiled or processed before being served to the browser. Config file: This file contains configuration settings for the theme, such as the theme name, author, and other global settings. Archetypes folder: This folder contains templates for creating new content files using the theme. i18n folder: This folder contains translation files for the theme in different languages. Shortcodes folder: This folder contains reusable snippets of code that can be used in content files to add custom functionality to the website. Partials folder: This folder contains smaller, reusable template files that can be included in other templates to reduce duplication and improve maintainability. By following this structure, Hugo themes can be easily shared and reused, allowing developers to quickly create new websites with a consistent look and feel.\nHow hugo run the application? We mainly focus on layouts folder. In _default folder, baseof.html is the entry port, index.html is the home\nPreparation Before go through the custom theme, here are some MUST TO READ documents you need to read.\nTemplating page-bundles Hugo menu Pagination Partial Templates Single Page Templates Content View Templates Taxonomies Variables and Params Function .Format Function .Param Config.toml file In config.toml, we can setup theme and define all the global variables, such as website url, website name, your name as the author, social media and so on.\nIntroduce theme 1 theme = \u0026#39;dark-theme\u0026#39; # the name should match your theme\u0026#39;s name in the theme folder Setup menu 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 # setup menu sectionPagesMenu = \u0026#34;main\u0026#34; [menu] [[menu.main]] name = \u0026#34;Home\u0026#34; pre = \u0026#34;home\u0026#34; url = \u0026#34;/\u0026#34; weight = 1 [[menu.main]] name = \u0026#34;My Project\u0026#34; pre = \u0026#34;posts\u0026#34; url = \u0026#34;/posts/\u0026#34; identifier = \u0026#34;posts\u0026#34; weight = 2 [[menu.main]] name = \u0026#34;Tags\u0026#34; pre = \u0026#34;tag\u0026#34; identifier = \u0026#34;tags\u0026#34; url = \u0026#34;/tags/\u0026#34; weight = 3 [[menu.main]] name = \u0026#34;Abouts\u0026#34; pre = \u0026#34;about\u0026#34; identifier = \u0026#34;about\u0026#34; url = \u0026#34;/about/\u0026#34; weight = 4 Hugo provides some default menu: posts,tags and categories. For the posts, generally it shows all your articles(blog), we will define the posts structure later.\nCommon js and css HTML structure Every html page contains some same css files and js files, such as same header and footer. In Layout/partials folder, hugo helps us to generate head.html, footer.html already, but we can create another two html to write js and css. Head and footer we use to write common navigation and footer parts;\nHeader and footer-script are for common css and js. Default HTML Entry Point \u0026mdash; baseof.html In layouts/_default folder, baseof.html is the main entrance, so we import the common HTML in the baseof.html, such as header, footer and main body.\nbaseof.html\nThis part is the dynamic content we reuse in each html, in other words, when user click different HTML page, it\u0026rsquo;ll show different content, but the header(navigation menu) and footer are the same. 1 {{- block \u0026#34;main\u0026#34; .}}xxxxxx{{- end}} display different content homepage \u0026mdash; index.html index.html\n_index.md\nIf we want to use the parameters we define in the md file, the syntax is 1 {{.Params.typed_names }} If we want to use the parameters we define in the config file(Global parameters), the syntax is 1 {{ $.Site.Params.homepage }} Article/post page \u0026mdash; single.html In Hugo, the single.html file is a template file used to display individual content pages, such as a single blog post or a single page on your website.\nThe single.html template can include Hugo variables and functions to display dynamic content, such as the title, date, author, and content of the page. You can also add custom CSS styles or JavaScript scripts to enhance the layout and functionality of your pages.\nOnce you have created the single.html template in your theme\u0026rsquo;s layouts directory, Hugo will automatically use it to display individual content pages on your website. If you want to customize the layout for specific types of content, you can create additional templates with different names, such as single-blog.html or single-page.html, and specify their usage in your Hugo configuration file.\nsingle.html ", 
            "url": "https:\/\/hupochuanbird.github.io\/posts\/hugo-introduction\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/tags\/introduction\/": {
            "title": "introduction",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/tags\/introduction\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/": {
            "title": "Home",
            "tags": [],
            "content": "Hello, I\u0026rsquo;m yejia Yang\nI\u0026rsquo;m a backend developer, currently work for a startup company\nI like learning something new.\n", 
            "url": "https:\/\/hupochuanbird.github.io\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/tags\/christmas\/": {
            "title": "Christmas",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/tags\/christmas\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/gallery\/dublin-christmas-2021\/": {
            "title": "Dublin Christmas in 2021",
            "tags": ["Christmas","happynewyear",],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/gallery\/dublin-christmas-2021\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/tags\/happynewyear\/": {
            "title": "happynewyear",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/tags\/happynewyear\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/categories\/galway\/": {
            "title": "Galway",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/categories\/galway\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/gallery\/galway-2021-christmas\/": {
            "title": "Galway Christmas in 2021",
            "tags": ["travel",],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/gallery\/galway-2021-christmas\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/tags\/travel\/": {
            "title": "travel",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/tags\/travel\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/categories\/2021\/": {
            "title": "2021",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/categories\/2021\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/categories\/kinsale\/": {
            "title": "Kinsale",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/categories\/kinsale\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/gallery\/kinsale-2021\/": {
            "title": "Kinsale visit 2021",
            "tags": ["travel",],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/gallery\/kinsale-2021\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/archives\/": {
            "title": "Archive",
            "tags": [],
            "content": "Hello, I\u0026rsquo;m Archives ", 
            "url": "https:\/\/hupochuanbird.github.io\/archives\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/search\/": {
            "title": "Search me!",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/search\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/series\/": {
            "title": "Series",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/series\/"
        },
        
    }
</script>



<script async src="https://www.googletagmanager.com/gtag/js?id=G-C427NV2JKE"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-C427NV2JKE');
</script>

        </div><script src="/js/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script src="/js/particles.min.js"></script>
<script src="/js/typed/typed.min.js"></script>
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0/dist/fancybox/fancybox.umd.js"></script>

<script src="/js/main.js?v=2"></script>
<script src="/js/testdd.js?v=1"></script>



<script>
    function toggleTheme() {
      const currentTheme = localStorage.getItem('theme') || 'light';
      const newTheme = currentTheme === 'light' ? 'dark' : 'light';
      document.documentElement.setAttribute('data-theme', newTheme);
      localStorage.setItem('theme', newTheme);
      updateIcon(newTheme);
    }
  
    function updateIcon(theme) {
      const themeSwitch = document.getElementById('theme-switch');
      if (theme === 'dark') {
        themeSwitch.checked = true;
      } else {
        themeSwitch.checked = false;
      }
    }
  
    document.addEventListener('DOMContentLoaded', (event) => {
      const savedTheme = localStorage.getItem('theme') || 'light';
      document.documentElement.setAttribute('data-theme', savedTheme);
      updateIcon(savedTheme);
    });
  </script>
  </body>
</html>